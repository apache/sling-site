<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: How to Convert a Provisioning Model to a Feature Model</title>
        <link rel="icon" href="/res/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header">
                    <a href="https://www.apache.org">
                        <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                    </a>
                </div>                
            </div><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Site Map</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="https://github.com/apache/?utf8=%E2%9C%93&q=sling">GitHub</a></li><li><a href="https://gitbox.apache.org/repos/asf?s=sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/featuremodel.html">
                                        featuremodel
                                    </a>
                                </span><span class="tag">
                                    <a href="/tags/sling.html">
                                        sling
                                    </a>
                                </span><span class="tag">
                                    <a href="/tags/kickstarter.html">
                                        kickstarter
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            How to Convert a Provisioning Model to a Feature Model
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row"><div><section><h3><a href="#about-this-how-to" id="about-this-how-to">About this How-To</a></h3>
<div style="background: #cde0ea; padding: 14px; border-left: 10px solid #f9bb00;">
<h4><a href="#what-well-explore" id="what-well-explore">What we'll explore:</a></h4>
<ul>
<li>We'll convert the Sling Starter project to a Feature Model using a Maven plugin</li>
<li>We'll visit our old friend, the Kickstarter, and start Sling using the generated Feature Model</li>
</ul>
<h4><a href="#what-you-should-know" id="what-you-should-know">What you should know:</a></h4>
<ul>
<li>Skill Level: Intermediate</li>
<li>Environment: Windows/Unix</li>
<li>Time: 20 minutes</li>
</ul>
</div>
<ul>
<li>Back To: <a href="/documentation/feature-model/howtos/create-sling-composite.html">How to Create a Composite NodeStore</a></li>
<li>Back to the: <a href="/documentation/feature-model/feature-model-howto.html">Feature Model How-To Guide</a></li>
</ul>
<h3><a href="#prerequisites" id="prerequisites">Prerequisites</a></h3>
<p>In order to follow this how-to you'll need the following on your computer:</p>
<ul>
<li>Java 8</li>
<li>Maven 3</li>
<li>Bash shell</li>
</ul>
<h3><a href="#create-a-feature-model" id="create-a-feature-model">Create a Feature Model</a></h3>
<div style="background: #cde0ea; padding: 14px; border-left: 10px solid #f9bb00;">
<p><strong>Note:</strong> At the time of this writing, the Feature Model is not officially used by Sling. Until Sling is fully converted to the Feature Model, we'll have to use the <em>Provisioning to Feature Model Converter Plugin</em>. The plugin will create a Feature Model from each Provisioning Model file. The plugin will then assemble all the Feature Models into a single Feature Model file using the Feature Aggregate.</p>
</div>
<h3><a href="#step-1-get-sling-starter-and-the-kickstarter-projects" id="step-1-get-sling-starter-and-the-kickstarter-projects">Step 1: Get Sling Starter and the Kickstarter projects</a></h3>
<p>Start by creating a directory called <code>myfeaturemodel</code>. We'll use this directory as our project workspace.</p>
<pre><code>$ mkdir myfeaturemodel
</code></pre>
<p>We'll add two projects to this workspace:</p>
<ul>
<li>The Sling Starter source code</li>
<li>The Sling Kickstarter source code
<pre><code>$ cd myfeaturemodel
$ git clone https://github.com/apache/sling-org-apache-sling-starter.git
$ git clone https://github.com/apache/sling-org-apache-sling-kickstart.git
</code></pre>
</li>
</ul>
<p>Your workspace should now look like this:</p>
<pre><code>$ ls -l
drwxr-xr-x  15 user group 480 Jun  8 16:16 sling-org-apache-sling-kickstart
drwxr-xr-x  13 user group 416 Jun  8 16:10 sling-org-apache-sling-starter
</code></pre>
<h3><a href="#step-2-run-the-provisioning-model-conversion" id="step-2-run-the-provisioning-model-conversion">Step 2: Run the Provisioning Model Conversion</a></h3>
<p>The Kickstarter provides a Maven POM file called <code>sling-fm-pom.xml</code>  that converts the Sling Starter Provisioning Models to Feature Models. It then aggregates them into a single Feature Model.</p>
<pre><code>$ cd sling-org-apache-sling-kickstart
$ mvn -f sling-fm-pom.xml install -Dsling.starter.folder=../sling-org-apache-sling-starter 
</code></pre>
<div style="background: #cde0ea; padding: 14px; border-left: 10px solid #f9bb00;">
<p>Once the build is complete, you'll find a Feature Model file at <code>sling-org-apache-sling-kickstart/target/slingfeature-tmp/feature-sling12.json</code>.</p>
</div>
<p>Before continuing, run one more Maven build in this directory as we will need a copy of the Kickstarter JAR in the next section.</p>
<pre><code>$ mvn clean install
</code></pre>
<h3><a href="#step-3-run-sling-using-the-feature-model" id="step-3-run-sling-using-the-feature-model">Step 3: Run Sling using the Feature Model</a></h3>
<p>Now that we have a Feature Model file for Sling and a Kickstarter JAR, we are ready to create a new directory to execute Sling using the Kickstarter and the Feature Model we just created.</p>
<p>Begin, by changing into the parent workspace (<code>myfeaturemodel</code>) and create a new directory to run the Kickstarter. Then, copy the Feature Model file and Kickstarter JAR.</p>
<pre><code>$ cd ..
$ mkdir kickstart-run &amp;&amp; cd kickstart-run
$ cp ../sling-org-apache-sling-kickstart/target/slingfeature-tmp/feature-sling12.json .
$ cp ../sling-org-apache-sling-kickstart/target/org.apache.sling.kickstart-0.0.3-SNAPSHOT.jar .
</code></pre>
<p>Lastly, let's start Sling using the Feature Model.</p>
<pre><code>$ java -jar org.apache.sling.kickstart-0.0.3-SNAPSHOT.jar -s feature-sling12.json
</code></pre>
<h2><a href="#mission-accomplished" id="mission-accomplished">Mission Accomplished</a></h2>
<div style="background: #cde0ea; padding: 14px; border-left: 10px solid #f9bb00; margin-bottom: 1em;">
<h4><a href="#what-we-learned" id="what-we-learned">What we learned:</a></h4>
<ul>
<li>Learned that the <em>Provisioning to Feature Model Converter Plugin</em> can be used to convert Provisioning Models to Feature Models</li>
<li>Converted the Provisioning Models in the Sling Starter project to a single Feature Model</li>
<li>Started Sling using the newly created Feature Model file with the Kickstarter</li>
</ul>
</div>
<div style="background: #cde0ea; padding: 14px; border-left: 10px solid #f9bb00; margin-bottom: 1em;">
<ul>
<li>Back To: <a href="/documentation/feature-model/howtos/create-sling-composite.html">How to Create a Composite NodeStore</a></li>
</ul>
</div>
</section></div></div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/feature-model/howtos/create-sling-fm.md">
                            content/documentation/feature-model/howtos/create-sling-fm.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Bertrand Delacretaz</span> on <span class="comment">2020-06-18</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright Â© 2007-2021 The Apache Software Foundation.
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>