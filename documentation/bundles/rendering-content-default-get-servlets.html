<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Rendering Content - GET Servlets</title>
        <link rel="icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/res/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
	<!-- Matomo Web Analytics -->
	<script>
	var _paq = window._paq = window._paq || [];
	/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	/* We explicitly disable cookie tracking to avoid privacy issues */
	_paq.push(['disableCookies']); 
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	  var u="https://matomo.privacy.apache.org/";
	  _paq.push(['setTrackerUrl', u+'matomo.php']);
	  _paq.push(['setSiteId', '6']);
	  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<!-- End Matomo Code -->
	<link href='/pagefind/pagefind-ui.css' rel='stylesheet'><script src='/pagefind/pagefind-ui.js' type='text/javascript'></script>
	<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#searchbox" });
    });
	</script>
	
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header asf-logo">
                    <a href="https://www.apache.org">
                        <img alt="Apache Software Foundation" src="https://apache.org/img/asf_logo.png"/>
                    </a>
                </div>                
            </div><section class="searchbox level is-marginless">
                <div id="searchbox"></div>
            </section><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling13/index.html">Sling 13</a></li><li><a href="/apidocs/sling12/index.html">Sling 12</a></li><li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf#sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li><li>
                                            <a href="/documentation/bundles.html">
                                                Bundles
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/servlets.html">
                                        servlets
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            Rendering Content - GET Servlets
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row" data-pagefind-body="true"><div><section><p><!-- TODO reactivate TOC once JBake moves to flexmark-java -->
</p>
<h1><a href="#overview" id="overview">Overview</a></h1>
<p>Sling provides a number of servlets answering <code>GET</code> or <code>HEAD</code>, in the <a href="https://github.com/apache/sling-org-apache-sling-servlets-get"><code>org.apache.sling.servlets.get</code> bundle</a>.</p>
<p>Those provide useful functionality out of the box for example JSON rendering of content.</p>
<p>This page provides an overview of these servlets shipping with Sling.</p>
<h1><a href="#defaultgetservlet" id="defaultgetservlet">DefaultGetServlet</a></h1>
<p>The <code>DefaultGetServlet</code> is registered on the special <a href="../the-sling-engine/servlets.html#default-servlets">resource type <code>sling/servlet/default</code></a> which acts as fallback whenever no more specifically registered servlet can be found. It answers both <code>GET</code> and <code>HEAD</code> requests.</p>
<p>Its configuration can be found at <code>/system/console/configMgr/org.apache.sling.servlets.get.DefaultGetServlet</code> on a standard Sling setup, and should be self-explaining. One common use case of adjusting the configuration is to disable some of the default renderings listed below, as they might not be useful or desired on production systems.</p>
<p>If not otherwise mentioned for specific renderings the servlet does not support conditional requests as specified by <a href="https://tools.ietf.org/html/rfc7232">RFC 7232</a> (i.e. the <code>If-....</code> request headers are disregarded and the response will neither contain <code>ETag</code> nor <code>Last-Modified</code> headers).</p>
<h2><a href="#default-renderings" id="default-renderings">Default renderings</a></h2>
<h3><a href="#json-rendering" id="json-rendering">JSON rendering</a></h3>
<p>Adding a .json extension to a request triggers the default Sling GET servlet in JSON mode, unless a more specific servlet or script is provided for the current resource.</p>
<p>This servlet currently supports the following selectors:</p>
<ul>
<li><code>.tidy</code> causes the JSON output to be formatted</li>
<li><code>.harray</code> causes child nodes to be output as arrays instead of objects, to preserve their order (requires <code>org.apache.sling.servlets.get</code> V2.1.10)</li>
<li>A numeric value or <code>.infinity</code> as the last selector selects the desired recursion level</li>
</ul>
<p>Note that the number of elements is limited by a configurable value, see the <code>DefaultGetServlet</code> configuration for more info.</p>
<h3><a href="#html-rendering" id="html-rendering">HTML rendering</a></h3>
<p>In a similar way, adding a <code>.html</code> extension to a request triggers the default Sling GET servlet in HTML mode. That rendering just dumps the current node values in a readable way, but it's only really useful for troubleshooting.</p>
<h3><a href="#text-rendering" id="text-rendering">Text rendering</a></h3>
<p>A basic text rendering is also provided if the request has a <code>.txt</code> extension, unless more specific servlets or scripts are provided.</p>
<h3><a href="#xml-rendering" id="xml-rendering">XML rendering</a></h3>
<p>Adding a <code>.xml</code> extension triggers the default XML rendering, once again unless a more specific script or servlet is registered for the current resource.</p>
<p>That XML rendering currently uses the JCR &quot;document view&quot; export functionality directly, so it only supports rendering resources that are backed by JCR nodes.</p>
<h3><a href="#stream-rendering" id="stream-rendering">Stream rendering</a></h3>
<p>Whenever the request carries the extension <code>.res</code> or no extension at all, the <a href="../the-sling-engine/resources.html">resource's input stream</a> is spooled to the servlet's response (leveraging <code>Resource.adaptTo(InputStream.class)</code>). This servlet supports <a href="https://tools.ietf.org/html/rfc7232">conditional requests (RFC 7232)</a> based on the last-modified response header by evaluating the resource's modification date from <code>Resource.getResourceMetadata().getModificationTime()</code>  and <a href="https://tools.ietf.org/html/rfc7233">range requests (RFC 7233)</a>.</p>
<p>In case the underlying resource's InputStream is an <a href="https://github.com/apache/sling-org-apache-sling-api/blob/master/src/main/java/org/apache/sling/api/resource/external/ExternalizableInputStream.java">ExternalizableInputStream</a> instead a redirect towards its URI is triggered (<a href="https://issues.apache.org/jira/browse/SLING-7140">SLING-7140</a>).</p>
<h2><a href="#programmatically-reusing-defaultgetservlet" id="programmatically-reusing-defaultgetservlet">Programmatically reusing DefaultGetServlet</a></h2>
<p>There are scenarios where it is useful to stream e.g. a binary resource using the default GET servlet with a different extension/resource type. However, there is no API to select a specific servlet. We can still stream using the default GET servlet by taking advantage of the fact that it is also registered for the <em>res</em> extension. The code to do that from your custom servlet would be:</p>
<pre><code>Resource toRender = /* code to obtain resource here */ null;
request
    .getRequestDispatcher(toRender.getPath() + &quot;.res&quot;)
    .forward(request, response);  
</code></pre>
<p>See also <a href="https://issues.apache.org/jira/browse/SLING-8742">SLING-8742 - Allow overriding the extension when using the RequestDispatcher</a> for a discussion on providing an API for this use case.</p>
<p>The same approach is possible for all other rendering by retrieving a request dispatcher with the appropriate selector.</p>
<h1><a href="#redirectservlet" id="redirectservlet">RedirectServlet</a></h1>
<p>The <code>RedirectServlet</code> handles the <code>sling:redirect</code> resource type, using the <code>sling:target</code> property of the resource to define the redirect target, and the <code>sling:status</code> property to define the HTTP status to use (default is 302).</p>
<p>This is not to be confused with the <code>sling:redirect</code> property used under <code>/etc/map</code>, which is described in <a href="/documentation/the-sling-engine/mappings-for-resource-resolution.html">Mappings for Resource Resolution</a></p>
<h1><a href="#slinginfoservlet" id="slinginfoservlet">SlingInfoServlet</a></h1>
<p>The <code>SlingInfoServlet</code> provides info on the current JCR session, for requests that map to JCR nodes.</p>
<p>It is available at <code>/system/sling/info.sessionInfo</code> by default, and supports <code>.json</code> and <code>.txt</code> extensions.</p>
<h1><a href="#jcr-versions-support" id="jcr-versions-support">JCR Versions Support</a></h1>
<p>The extensions created for <a href="https://issues.apache.org/jira/browse/SLING-848">SLING-848</a> and <a href="https://issues.apache.org/jira/browse/SLING-4318">SLING-4318</a> provide some access to JCR version management features, along with the <a href="/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html">Sling POST Servlet</a> versioning-related features.</p>
<p>It obviously only works on top of Sling resources backed by the <a href="https://sling.apache.org/documentation/the-sling-engine/resources.html#jcr-based-resources">JCR Resource Provider</a>.</p>
<p>Here's an example that demonstrates this.</p>
<p>First, create a versionable node and check it in:</p>
<pre><code>curl -u admin:admin -Fjcr:mixinTypes=mix:versionable -Fmarker=A http://localhost:8080/vtest
curl -u admin:admin -F :operation=checkin http://localhost:8080/vtest
</code></pre>
<p>via the <a href="manipulating-content-the-slingpostservlet-servlets-post.html#versionable-node-support">Sling POST servlet</a>.</p>
<h2><a href="#versioninfoservlet" id="versioninfoservlet">VersionInfoServlet</a></h2>
<p>Use the <a href="http://localhost:8080/system/console/configMgr/org.apache.sling.servlets.get.impl.version.VersionInfoServlet">org.apache.sling.servlets.get.impl.version.VersionInfoServlet</a> OSGi configuration to activate the <code>VersionInfoServlet</code> which supports the <code>.V.json</code> selector shown below. That servlet is disabled by default to make sure the configurable V selector doesn't interfere with existing applications.</p>
<p>It is registered to the resource type <code>sling/servlet/default</code> for the configurable selector <code>V</code>.</p>
<p>To shows the initial versions state just request the relevant resource with the <code>V</code> selector:</p>
<pre><code>curl -s -u admin:admin http://localhost:8080/vtest.V.json
{
  &quot;versions&quot;: {
    &quot;jcr:rootVersion&quot;: {
      &quot;created&quot;: &quot;Tue Jan 23 2018 14:08:09 GMT+0100&quot;,
      &quot;successors&quot;: [
        &quot;1.0&quot;
      ],
      &quot;predecessors&quot;: [],
      &quot;labels&quot;: [],
      &quot;baseVersion&quot;: &quot;false&quot;
    },
    &quot;1.0&quot;: {
      &quot;created&quot;: &quot;Tue Jan 23 2018 14:08:35 GMT+0100&quot;,
      &quot;successors&quot;: [],
      &quot;predecessors&quot;: [
        &quot;jcr:rootVersion&quot;
      ],
      &quot;labels&quot;: [],
      &quot;baseVersion&quot;: &quot;true&quot;
    }
  }
}    
</code></pre>
<p>Now, create two additional versions with a different <code>marker</code> value:</p>
<pre><code>curl -u admin:admin -F :autoCheckin=true -F :autoCheckout=true -Fmarker=B http://localhost:8080/vtest
curl -u admin:admin -F :autoCheckin=true -F :autoCheckout=true -Fmarker=C http://localhost:8080/vtest
</code></pre>
<p>The <code>VersionInfoServlet</code> now shows all versions (output abbreviated):</p>
<pre><code>curl -s -u admin:admin http://localhost:8080/vtest.V.json
{
  &quot;versions&quot;: {
    &quot;jcr:rootVersion&quot;: {
      &quot;successors&quot;: [
        &quot;1.0&quot;
      ],
      &quot;predecessors&quot;: []
    },
    &quot;1.0&quot;: {
      &quot;successors&quot;: [
        &quot;1.1&quot;
      ],
      &quot;predecessors&quot;: [
        &quot;jcr:rootVersion&quot;
      ]
    },
    &quot;1.1&quot;: {
      &quot;successors&quot;: [
        &quot;1.2&quot;
      ],
      &quot;predecessors&quot;: [
        &quot;1.0&quot;
      ]
    },
    &quot;1.2&quot;: {
      &quot;successors&quot;: [],
      &quot;predecessors&quot;: [
        &quot;1.1&quot;
      ]
    }
  }
}
</code></pre>
<h2><a href="#version-uri-path-parameter-on-defaultgetservlet" id="version-uri-path-parameter-on-defaultgetservlet">Version URI path parameter on DefaultGetServlet</a></h2>
<p>And the <a href="../the-sling-engine/url-decomposition.html"><code>;v=</code> URI path parameter</a> gives access to each version (output abbreviated):</p>
<pre><code>curl -s &quot;http://localhost:8080/vtest.tidy.json;v=1.0&quot;
{
  &quot;marker&quot;: &quot;A&quot;,
  &quot;jcr:frozenUuid&quot;: &quot;a6fd966d-917d-49e2-ba32-e7f942ff3a0f&quot;,
  &quot;jcr:uuid&quot;: &quot;74291bc8-e7cb-4a71-ab3a-224ba234be0a&quot;
}

curl -s &quot;http://localhost:8080/vtest.tidy.json;v=1.1&quot;
{
  &quot;marker&quot;: &quot;B&quot;,
  &quot;jcr:frozenUuid&quot;: &quot;a6fd966d-917d-49e2-ba32-e7f942ff3a0f&quot;,
  &quot;jcr:uuid&quot;: &quot;18b38479-a3fc-4a21-9cd4-89c44daf917d&quot;
}

curl -s &quot;http://localhost:8080/vtest.tidy.json;v=1.2&quot;
{
  &quot;marker&quot;: &quot;C&quot;,
  &quot;jcr:frozenUuid&quot;: &quot;a6fd966d-917d-49e2-ba32-e7f942ff3a0f&quot;,
  &quot;jcr:uuid&quot;: &quot;3d55430b-2fa6-4562-b415-638fb6608c0e&quot;
}
</code></pre>
</section></div></div><div data-pagefind-body="true" data-pagefind-weight="7.0" style="display:none;"> - ( Rendering Content - GET Servlets )</div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/bundles/rendering-content-default-get-servlets.md">
                            content/documentation/bundles/rendering-content-default-get-servlets.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Konrad Windszus</span> on <span class="comment">2024-09-30</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the ASF logo, and the Apache Sling project
    logo are trademarks of The Apache Software Foundation. All other marks mentioned 
    may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright Â© 2007-2025<a href="https://www.apache.org/">
                            The Apache Software Foundation
                        </a>|<a href="https://privacy.apache.org/policies/privacy-policy-public.html">
                            Privacy Policy
                        </a>
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>