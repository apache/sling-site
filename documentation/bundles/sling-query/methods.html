<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Method list</title>
        <link rel="icon" href="/res/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header">
                    <a href="https://www.apache.org">
                        <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                    </a>
                </div>                
            </div><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf?s=sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li><li>
                                            <a href="/documentation/bundles.html">
                                                Bundles
                                            </a>
                                        </li><li>
                                            <a href="/documentation/bundles/sling-query.html">
                                                Sling Query
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/slingquery.html">
                                        slingquery
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            Method list
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row"><div><section><h3><a href="#resource-resources" id="resource-resources"><code>$(Resource... resources)</code></a></h3>
<p>Create a new SlingQuery object, using passed resources as an initial collection. Example:</p>
<pre><code>$(resource); // a simple SlingQuery collection containing one resource
</code></pre>
<h3><a href="#addresource-resources" id="addresource-resources"><code>.add(Resource... resources)</code></a></h3>
<p>Add resources to the collection.</p>
<pre><code>$(resource).children().add(resource); // collection contains resource and all its children
</code></pre>
<h3><a href="#aslist" id="aslist"><code>.asList()</code></a></h3>
<p>Transform SlingQuery collection into a lazy list.</p>
<pre><code>$(resource).children(&quot;cq:Page&quot;).asList().get(0); // get the first child page
$(resource).children().asList().isEmpty(); // return true if the resource have no children
</code></pre>
<h3><a href="#childrenselector" id="childrenselector"><code>.children([selector])</code></a></h3>
<p>Get list of the children for each resource in the collection. Pass <code>selector</code> to filter children. Example:</p>
<pre><code>$(resource).children(&quot;cq:Page&quot;); // get all page children of the resource
$(resource).children().children(); // get all grand-children of the resource
</code></pre>
<h3><a href="#closestselector" id="closestselector"><code>.closest(selector)</code></a></h3>
<p>For each resource in the collection, return the first element matching the selector testing the resource itself and traversing up its ancestors. Example:</p>
<pre><code>$(resource).closest(&quot;cq:Page&quot;); // find containing page, like PageManager#getContainingPage
// let's assume that someCqPageResource is a cq:Page
$(someCqPageResource).closest(&quot;cq:Page&quot;); // return the same resource
</code></pre>
<h3><a href="#eqindex" id="eqindex"><code>.eq(index)</code></a></h3>
<p>Reduce resource collection to the one resource at the given 0-based index. Example:</p>
<pre><code>$(resource0, resource1, resource2).eq(1); // return resource1
$(resource).children().eq(0); // return first child of the resource
</code></pre>
<h3><a href="#filterselector" id="filterselector"><code>.filter(selector)</code></a></h3>
<p>Filter resource collection using given selector.</p>
<pre><code>final Calendar someTimeAgo = Calendar.getInstance();
someTimeAgo.add(Calendar.HOUR, -5);

// get children pages modified in the last 5 hours
SlingQuery query = $(resource).children(&quot;cq:Page&quot;).filter(new Predicate&lt;Resource&gt;() {
    @Override
    public boolean accepts(Resource resource) {
        return resource.adaptTo(Page.class).getLastModified().after(someTimeAgo);
    }
});
</code></pre>
<h3><a href="#findselector" id="findselector"><code>.find([selector])</code></a></h3>
<p>For each resource in collection return all its descendants using <a href="#searchstrategystrategy">selected strategy</a>. Please notice that invoking this method on a resource being a root of a large subtree may and will cause performance problems.</p>
<pre><code>$(resource).find(&quot;cq:Page&quot;); // find all descendant pages
</code></pre>
<h3><a href="#first" id="first"><code>.first()</code></a></h3>
<p>Filter resource collection to the first element. Equivalent to <code>.eq(0)</code> or <code>.slice(0, 0)</code>.</p>
<pre><code>$(resource).siblings().first(); // get the first sibling of the current resource
</code></pre>
<h3><a href="#hasselector" id="hasselector"><code>.has(selector)</code></a></h3>
<p>Pick such resources from the collection that have descendant matching the selector. Example:</p>
<pre><code>$(...).children('cq:Page').has(foundation/components/richtext) // find children pages containing some richtext component
</code></pre>
<p>This method uses <a href="#searchstrategystrategy">selected strategy</a> to iterate over resource descendants.</p>
<h3><a href="#last" id="last"><code>.last()</code></a></h3>
<p>Filter resource collection to the last element.</p>
<pre><code>$(resource).siblings().last(); // get the last sibling of the current resource
</code></pre>
<h3><a href="#mapclasst-clazz" id="mapclasst-clazz"><code>.map(Class&lt;T&gt; clazz)</code></a></h3>
<p>Transform the whole collection to a new <code>Iterable&lt;T&gt;</code> object, invoking <code>adaptTo(clazz)</code> method on each resource. If some resource can't be adapted to the class (eg. <code>adaptTo()</code> returns <code>null</code>), it will be skipped. Example:</p>
<pre><code>for (Page page : $(resource).parents(&quot;cq:Page&quot;).map(Page.class)) {
    // display breadcrumbs
}
</code></pre>
<h3><a href="#nextselector" id="nextselector"><code>.next([selector])</code></a></h3>
<p>Return the next sibling for each resource in the collection and optionally filter it by a selector. If the selector is given, but the sibling doesn't match it, empty collection will be returned.</p>
<pre><code>// let's assume that resource have 3 children: child1, child2 and child3
$(resource).children().first().next(); // return child2
</code></pre>
<h3><a href="#nextallselector" id="nextallselector"><code>.nextAll([selector])</code></a></h3>
<p>Return all following siblings for each resource in the collection, optionally filtering them by a selector.</p>
<pre><code>// let's assume that resource have 3 children: child1, child2 and child3
$(resource).children().first().nextAll(); // return child2 and child3
</code></pre>
<h3><a href="#nextuntilselector" id="nextuntilselector"><code>.nextUntil(selector)</code></a></h3>
<p>Return all following siblings for each resource in the collection up to, but not including, resource matched by a selector.</p>
<pre><code>// let's assume that resource have 4 children: child1, child2, child3 and child4
// additionaly, child4 has property jcr:title=Page
$(resource).children().first().nextUntil(&quot;[jcr:title=Page]&quot;); // return child2 and child3
</code></pre>
<h3><a href="#notselector" id="notselector"><code>.not(selector)</code></a></h3>
<p>Remove elements from the collection.</p>
<pre><code>$(resource).children().not(&quot;cq:Page&quot;); // remove all cq:Pages from the collection
$(resource).children().not(&quot;:first&quot;).not(&quot;:last&quot;); // remove the first and the last element of the collection
</code></pre>
<h3><a href="#parent" id="parent"><code>.parent()</code></a></h3>
<p>Replace each element in the collection with its parent.</p>
<pre><code>$(resource).find(&quot;cq:PageContent[jcr:title=My page]:first&quot;).parent(); // find the parent of the first `cq:PageContent` resource with given attribute in the subtree
</code></pre>
<h3><a href="#parentsselector" id="parentsselector"><code>.parents([selector])</code></a></h3>
<p>For each element in the collection find all of its ancestors, optionally filtering them by a selector.</p>
<pre><code>($resource).parents(&quot;cq:Page&quot;); // create page breadcrumbs for the given resources
</code></pre>
<h3><a href="#parentsuntilselector" id="parentsuntilselector"><code>.parentsUntil(selector)</code></a></h3>
<p>For each element in the collection find all of its ancestors until a resource matching the selector is found.</p>
<pre><code>($currentResource).parentsUntil(&quot;cq:Page&quot;); // find all ancestor components on the current page
</code></pre>
<h3><a href="#prevselector" id="prevselector"><code>.prev([selector])</code></a></h3>
<p>Return the previous sibling for each resource in the collection and optionally filter it by a selector. If the selector is given, but the sibling doesn't match it, empty collection will be returned.</p>
<pre><code>// let's assume that resource have 3 children: child1, child2 and child3
$(resource).children().last().prev(); // return child2
</code></pre>
<h3><a href="#prevallselector" id="prevallselector"><code>.prevAll([selector])</code></a></h3>
<p>Return all preceding siblings for each resource in the collection, optionally filtering them by a selector.</p>
<pre><code>// let's assume that resource have 3 children: child1, child2 and child3
$(resource).children().last().prevAll(); // return child1 and child2
</code></pre>
<h3><a href="#prevuntilselector" id="prevuntilselector"><code>.prevUntil(selector)</code></a></h3>
<p>Return all preceding siblings for each resource in the collection up to, but not including, resource matched by a selector.</p>
<pre><code>// let's assume that resource have 4 children: child1, child2, child3 and child4
// additionally, child1 has property jcr:title=Page
$(resource).children().last().prevUntil(&quot;[jcr:title=Page]&quot;); // return child2 and child3
</code></pre>
<h3><a href="#searchstrategystrategy" id="searchstrategystrategy"><code>.searchStrategy(strategy)</code></a></h3>
<p>Select new search strategy, which will be used in following <a href="#findselector"><code>find()</code></a> and <a href="#hasselector"><code>has()</code></a> function invocations. There 3 options:</p>
<ul>
<li><code>SearchStrategy.DFS</code> - <a href="http://en.wikipedia.org/wiki/Depth-first_search">depth-first search</a></li>
<li><code>SearchStrategy.BFS</code> - <a href="http://en.wikipedia.org/wiki/Breadth-first_search">breadth-first search</a></li>
<li><code>SearchStrategy.QUERY</code> - use JCR SQL2 query (default since 1.4.0)</li>
</ul>
<p>DFS and BFS iterate through descendants using appropriate algorithm. QUERY strategy tries to transform SlingQuery selector into a SQL2 query and invokes it. Because there are SlingQuery operations that can't be translated (eg. <code>:has()</code> modifier), the SQL2 query result is treated as a initial collection that needs further processing.</p>
<h3><a href="#siblingsselector" id="siblingsselector"><code>.siblings([selector])</code></a></h3>
<p>Return siblings for the given resources, optionally filtered by a selector.</p>
<pre><code>$(resource).closest(&quot;cq:Page&quot;).siblings(&quot;cq:Page&quot;); // return all sibling pages
</code></pre>
<h3><a href="#slicefrom-to" id="slicefrom-to"><code>.slice(from[, to])</code></a></h3>
<p>Reduce the collection to a sub-collection specified by a given range. Both <code>from</code> and <code>to</code> are inclusive and 0-based indices. If the <code>to</code> parameter is not specified, the whole sub-collection starting with <code>from</code> will be returned.</p>
<pre><code>// let's assume that resource have 4 children: child1, child2, child3 and child4
$(resource).children().slice(1, 2); // return child1 and child2
</code></pre>
</section></div></div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/bundles/sling-query/methods.md">
                            content/documentation/bundles/sling-query/methods.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Bertrand Delacretaz</span> on <span class="comment">2017-09-29</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright Â© 2007-2021 The Apache Software Foundation.
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>