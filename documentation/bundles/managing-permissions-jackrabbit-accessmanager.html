<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Managing permissions (jackrabbit.accessmanager)</title>
        <link rel="icon" href="/res/favicon.ico"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
    </head>    <body>
<div class="title">
            <div class="logo">
                <a href="http://sling.apache.org">
                    <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                </a>
            </div><div class="header">
                <a href="http://www.apache.org">
                    <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                </a>
            </div>
        </div><div class="menu">
            <p>
                <strong><a href="/documentation.html">Documentation</a></strong><br/>
                <a href="/documentation/getting-started.html">Getting Started</a><br/>
                <a href="/documentation/the-sling-engine.html">The Sling Engine</a><br/>
                <a href="/documentation/development.html">Development</a><br/>
                <a href="/documentation/bundles.html">Bundles</a><br/>
                <a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a><br/>
                <a href="/documentation/configuration.html">Configuration</a>
            </p><p>
                <a href="http://s.apache.org/sling.wiki">Wiki</a><br/>
                <a href="http://s.apache.org/sling.faq">FAQ</a><br/>
                
            </p><p>
                <strong>API Docs</strong><br/>
                <a href="/apidocs/sling9/index.html">Sling 9</a><br/>
                <a href="/apidocs/sling8/index.html">Sling 8</a><br/>
                <a href="/apidocs/sling7/index.html">Sling 7</a><br/>
                <a href="/apidocs/sling6/index.html">Sling 6</a><br/>
                <a href="/apidocs/sling5/index.html">Sling 5</a><br/>
                <a href="/javadoc-io.html">Archive at javadoc.io</a><br/>
                
            </p><p>
                <strong>Project Info</strong><br/>
                <a href="/downloads.cgi">Downloads</a><br/>
                <a href="http://www.apache.org/licenses/">License</a><br/>
                <a href="/contributing.html">Contributing</a><br/>
                <a href="/news.html">News</a><br/>
                <a href="/links.html">Links</a><br/>
                <a href="/project-information.html">Project Information</a><br/>
                <a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a><br/>
                <a href="/project-information/security.html">Security</a><br/>
                
            </p><p>
                <strong>Source</strong><br/>
                <a href="http://svn.apache.org/viewvc/sling/trunk">Subversion</a><br/>
                <a href="git://git.apache.org/sling.git">Git</a><br/>
                <a href="https://github.com/apache/sling">Github Mirror</a><br/>
                
            </p><p>
                <strong>Sponsorship</strong><br/>
                <a href="http://www.apache.org/foundation/thanks.html">Thanks</a><br/>
                <a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a><br/>
                <a href="https://donate.apache.org/">Donate!</a><br/>
                <a href="http://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a><br/>
                
            </p><p>
                <strong><a href="/sitemap.html">Site Map</a></strong>
            </p>
        </div>        <div class="main">
<div class="breadcrumbs"><a href="/">Home</a>&nbsp;&raquo;&nbsp;<a href="/documentation.html">Documentation</a>&nbsp;&raquo;&nbsp;<a href="/documentation/bundles.html">Bundles</a>&nbsp;&raquo;&nbsp;</div>            <h1 class="pagetitle">
                Managing permissions (jackrabbit.accessmanager)
            </h1><div class="tags"><a href="/tags/security.html" class="label">security</a> </div><div id="generatedToC"></div><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=pagetitle],h2,h3'}); } );</script><div class="row"><div class="small-12 columns"><section class="wrap"><p>The <code>jackrabbit-accessmanager</code> bundle delivers a REST interface to manipulate users permissions in the JCR. After installing the <code>jackrabbit-accessmanager</code> bundle the REST services are exposed under the path of the node where you will manipulate the permissions for a user with a specific selector like <code>modifyAce</code>, <code>acl</code> and <code>deleteAce</code>. <!-- TODO reactivate TOC once JBake moves to flexmark-java -->
</p>
<h2><a href="#privileges" name="privileges">Privileges</a></h2>
<table>
  <thead>
    <tr>
      <th>privilagename </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>jcr:read </td>
      <td>the privilege to retrieve a node and get its properties and their values </td>
    </tr>
    <tr>
      <td>jcr:readAccessControl </td>
      <td>the privilege to get the access control policy of a node </td>
    </tr>
    <tr>
      <td>jcr:modifyProperties </td>
      <td>the privilege to create, modify and remove the properties of a node </td>
    </tr>
    <tr>
      <td>jcr:addChildNodes </td>
      <td>the privilege to create child nodes of a node </td>
    </tr>
    <tr>
      <td>jcr:removeChildNodes </td>
      <td>the privilege to remove child nodes of a node </td>
    </tr>
    <tr>
      <td>jcr:removeNode </td>
      <td>the privilege to remove a node </td>
    </tr>
    <tr>
      <td>jcr:write </td>
      <td>an aggregate privilege that contains: jcr:modifyProperties jcr:addChildNodes jcr:removeNode jcr:removeChildNodes </td>
    </tr>
    <tr>
      <td>jcr:modifyAccessControl </td>
      <td>the privilege to modify the access control policies of a node </td>
    </tr>
    <tr>
      <td>jcr:lockManagement </td>
      <td>the privilege to lock and unlock a node </td>
    </tr>
    <tr>
      <td>jcr:versionManagement </td>
      <td>the privilege to perform versioning operations on a node </td>
    </tr>
    <tr>
      <td>jcr:nodeTypeManagement </td>
      <td>the privilege to add and remove mixin node types and change the primary node type of a node </td>
    </tr>
    <tr>
      <td>jcr:retentionManagement </td>
      <td>the privilege to perform retention management operations on a node </td>
    </tr>
    <tr>
      <td>jcr:lifecycleManagement </td>
      <td>the privilege to perform lifecycle operations on a node </td>
    </tr>
    <tr>
      <td>jcr:all </td>
      <td>an aggregate privilege that contains all predefined privileges </td>
    </tr>
  </tbody>
</table>
<h2><a href="#add-or-modify-permissions" name="add-or-modify-permissions">Add or modify permissions</a></h2>
<p>To modify the permissions for a node POST a request to <code>/&lt;path-to-the-node&gt;.modifyAce.&lt;html or json&gt;</code>. The following parameters are available:</p>
<ul>
  <li><em>numeric</em> - Place the target ACE at the specified numeric index. |</li>
</ul>
<p>Responses: | 200 | Success | | 500 | Failure, HTML (or JSON) explains failure. | Example with curl:</p>
<pre><code>curl -FprincipalId=myuser -Fprivilege@jcr:read=granted http://localhost:8080/test/node.modifyAce.html
</code></pre>
<h2><a href="#delete-permissions" name="delete-permissions">Delete permissions</a></h2>
<p>To delete permissions for a node POST a request to <code>/&lt;path-to-the-node&gt;.deleteAce.&lt;html or json&gt;</code>. The following parameters are available:</p>
<p>Responses: | 200 | Success | | 500 | Failure, HTML (or JSON) explains failure. | Example with curl:</p>
<pre><code>curl -F:applyTo=myuser http://localhost:8080/test/node.deleteAce.html
</code></pre>
<h2><a href="#get-permissions" name="get-permissions">Get permissions</a></h2>
<h3><a href="#bound-permissions" name="bound-permissions">Bound Permissions</a></h3>
<p>To get the permissions bound to a particular node in a json format for a node send a GET request to <code>/&lt;path-to-the-node&gt;.acl.json</code>. </p>
<p>Example:</p>
<pre><code>http://localhost:8080/test/node.acl.json
</code></pre>
<h3><a href="#effective-permissions" name="effective-permissions">Effective Permissions</a></h3>
<p>To get the permissions which are effective for a particular node in a json format for a node send a GET request to <code>/&lt;path-to-the-node&gt;.eacl.json</code>. </p>
<p>Example:</p>
<pre><code>http://localhost:8080/test/node.eacl.json
</code></pre>
<div class="note">
See section 16.3 of the JCR 2.0 specification for an explanation of the difference between bound and effective policies.
</div>
<h2><a href="#sample-user-interface-implementation" name="sample-user-interface-implementation">Sample User Interface Implementation</a></h2>
<p><em>Since Version 2.1.1</em></p>
<p>A sample implementation of ui pages for permissions management is provided @ http://svn.apache.org/viewvc/sling/trunk/samples/accessmanager-ui/</p></section></div></div>
<div class="footer">
                <div class="trademarkFooter">
                    Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                </div>
            </div>            
            
        </div>
    </body>
</html>
