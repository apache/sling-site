<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Logical Pipes</title>
        <link rel="icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/res/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
	<!-- Matomo Web Analytics -->
	<script>
	var _paq = window._paq = window._paq || [];
	/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	/* We explicitly disable cookie tracking to avoid privacy issues */
	_paq.push(['disableCookies']); 
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	  var u="https://matomo.privacy.apache.org/";
	  _paq.push(['setTrackerUrl', u+'matomo.php']);
	  _paq.push(['setSiteId', '6']);
	  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<!-- End Matomo Code -->
	<link href='/pagefind/pagefind-ui.css' rel='stylesheet'><script src='/pagefind/pagefind-ui.js' type='text/javascript'></script>
	<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#searchbox" });
    });
	</script>
	
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header asf-logo">
                    <a href="https://www.apache.org">
                        <img alt="Apache Software Foundation" src="https://apache.org/images/asflogo_horizontal_color.svg"/>
                    </a>
                </div>                
            </div><section class="searchbox level is-marginless">
                <div id="searchbox"></div>
            </section><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling13/index.html">Sling 13</a></li><li><a href="/apidocs/sling12/index.html">Sling 12</a></li><li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf#sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="https://www.apache.org/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li><li>
                                            <a href="/documentation/bundles.html">
                                                Bundles
                                            </a>
                                        </li><li>
                                            <a href="/documentation/bundles/sling-pipes.html">
                                                Sling Pipes
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/pipes.html">
                                        pipes
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            Logical Pipes
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row" data-pagefind-body="true"><div><section><p>Those pipes help assembling pipes, or modifying the resource streams <a href="/documentation/bundles/sling-pipes/readers.html">readers</a> or <a href="/documentation/bundles/sling-pipes/writers.html">writers</a> could create.</p>
<h3><a href="#filterpipe-grepconf" id="filterpipe-grepconf">FilterPipe (<code>grep(conf)</code>)</a></h3>
<p>outputs the input resource if its matches its configuration</p>
<pre><code>echo /content/foo | grep foo=bar integerProp=2 booleanOne=false
</code></pre>
<p>will outputs <code>/content/foo</code> only if it has properties specified, you can revert the logic with ̀ slingPipesFilter_not` set to true</p>
<pre><code>echo /content/foo | grep foo=bar @ with slingPipesFilter_not=true
</code></pre>
<p>will either return <code>/content/foo</code> either nothing depending on it not containing <code>@foo=bar</code></p>
<p>you can do more complex use case tackling direclty the &quot;compiled&quot; persistence of the pipe</p>
<ul>
<li><code>sling:resourceType</code> is <code>slingPipes/filter</code></li>
<li><code>conf</code> node tree that will be tested against the current input of the pipe, each <code>/conf/sub@prop=value</code> will triggers a test on <code>./sub@prop</code> property of the current input, testing if its value matches <code>value</code> regex. If the special <code>slingPipesFilter_noChildren=${true}</code> property is there with the value instantiated as a true boolean, then filter will pass if corresponding node has no children.</li>
<li><code>slingPipesFilter_test='${...}'</code> evaluates the property value, and filters out the stream if the expression is not a boolean or false</li>
<li><code>slingPipesFilter_not='true'</code> inverts the expected result of the filter</li>
</ul>
<h3><a href="#super-pipes" id="super-pipes">Super pipes</a></h3>
<p>Pipes that litterally contains sub pipes, each super pipe share bindings with each others so data can be passed from one to another</p>
<h4><a href="#referencepipe-ref-path" id="referencepipe-ref-path">ReferencePipe (<code>ref &lt;path&gt;</code>)</a></h4>
<p>executes the pipe whose persistence is referenced in path property</p>
<pre><code>    ref /conf/pipes/aPipePersistence
</code></pre>
<p>will execute the pipe <code>/conf/myPipes/aPipePersistence</code> if you add <code>/conf/myPipes</code> to plumberImpl <code>referencePaths</code> configuration, you can then execute</p>
<pre><code>    ref aPipePersistence
</code></pre>
<h3><a href="#notpipe" id="notpipe">NotPipe</a></h3>
<p>executes the pipe referenced in path property, passes input only if referenced pipe doesn't return any resource</p>
<ul>
<li><code>sling:resourceType</code> is <code>slingPipes/not</code></li>
<li><code>path</code> path of the referenced pipe
<pre><code>not /conf/pipes/aPipePersistence
</code></pre>
</li>
</ul>
<p>or as for referenced pipe:</p>
<pre><code>    not aPipePersistence
</code></pre>
<h4><a href="#manifold" id="manifold">Manifold</a></h4>
<p>allows parallel execution of the sub pipes listed in configuration</p>
<ul>
<li><code>sling:resourceType</code> is <code>slingPipes/manifold</code></li>
<li><code>conf</code> node contains child pipes' configurations, that will be configured in the order they are found (note you should use sling:OrderedFolder)</li>
<li><code>queueSize</code> size of the merged resource queue, default is 10000</li>
<li><code>numThread</code> thread pool size for the execution of the subpipes, default is 5 - resource output will be ordered randomly; setting it to 1 will guarantee serial execution with predictable output order (i.e. the first subpipe resources will be exhausted before the second subpipe resources are output etc.); setting numThreads to 1 will have similar effects to using a container pipe, with the notable exception of output termination: whereas a container pipe chains sub pipes and will stop when any subpipe produces no output, the manifold pipe handles subpipes as independent streams and combines their output regardless of any void subpipe output</li>
<li><code>executionTimeout</code> execution time out for each sub pipe; given in seconds; default is 24h</li>
</ul>
<h4><a href="#container-pipe" id="container-pipe">Container Pipe</a></h4>
<p>assemble a simple sequence of pipes</p>
<ul>
<li><code>sling:resourceType</code> is <code>slingPipes/container</code></li>
<li><code>conf</code> node contains child pipes' configurations, that will be configured in the order they are found (note you should use sling:OrderedFolder)</li>
</ul>
<p>Note that pipe builder api automatically creates one for you to chain the subpipe you are configuring.</p>
</section></div></div><div data-pagefind-body="true" data-pagefind-weight="7.0" style="display:none;"> - ( Logical Pipes )</div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/bundles/sling-pipes/logical.md">
                            content/documentation/bundles/sling-pipes/logical.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Nicolas Peltier</span> on <span class="comment">2021-01-28</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the ASF logo, and the Apache Sling project
    logo are trademarks of The Apache Software Foundation. All other marks mentioned 
    may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright © 2007-2025<a href="https://www.apache.org/">
                            The Apache Software Foundation
                        </a>|<a href="https://privacy.apache.org/policies/privacy-policy-public.html">
                            Privacy Policy
                        </a>
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>