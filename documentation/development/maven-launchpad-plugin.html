<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Maven Launchpad Plugin</title>
        <link rel="icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
	<!-- Matomo Web Analytics -->
	<script>
	var _paq = window._paq = window._paq || [];
	/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	/* We explicitly disable cookie tracking to avoid privacy issues */
	_paq.push(['disableCookies']); 
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	  var u="https://matomo.privacy.apache.org/";
	  _paq.push(['setTrackerUrl', u+'matomo.php']);
	  _paq.push(['setSiteId', '6']);
	  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<!-- End Matomo Code -->
	
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header">
                    <a href="https://www.apache.org">
                        <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                    </a>
                </div>                
            </div><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling12/index.html">Sling 12</a></li><li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf?s=sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li><li>
                                            <a href="/documentation/development.html">
                                                Development
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/development.html">
                                        development
                                    </a>
                                </span><span class="tag">
                                    <a href="/tags/maven.html">
                                        maven
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            Maven Launchpad Plugin
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row"><div><section><div class="note">
The launchpad plugin has been retired in favour of the provisioning model and associated tooling, see <a href="http://sling.apache.org/documentation/development/slingstart.html">the provisioning model documentation</a>.
</div>
<p>The Maven Launchpad Plugin provides goals which facilitate the creation of OSGi applications. It supports the following runtime scenarios:</p>
<ul>
<li>A WAR file suitable for running in a JavaEE servlet container.</li>
<li>A standalone Java application, with HTTP support from the Felix HttpService implementation</li>
<li>Inside Apache Karaf</li>
</ul>
<p>In addition, the Maven Launchpad Plugin supports the publishing of an application descriptor, in the form of a <em>bundle list</em>, as a Maven artifact. This descriptor can then be used by downstream application builders as the basis for other applications. In Sling, this is embodied by two Maven projects:</p>
<ul>
<li><a href="https://github.com/apache/sling-org-apache-sling-starter">org.apache.sling.starter</a> - produces an application descriptor.</li>
<li><a href="https://github.com/apache/sling-org-apache-sling-launchpad-testing">org.apache.sling.launchpad.testing</a> - uses the application descriptor from <code>org.apache.sling.launchpad</code> and adds two bundles.</li>
</ul>
<p>Maven Launchpad Plugin provides the following goals:</p>
<table>
<thead>
<tr><th> Goals </th><th> Description </th></tr>
</thead>
<tbody>
<tr><td> launchpad:prepare-package </td><td> Create the file system structure required by Sling's Launchpad framework. </td></tr>
<tr><td> launchpad:attach-bundle-list </td><td> Attach the bundle list descriptor to the current project as a Maven artifact. </td></tr>
<tr><td> launchpad:create-karaf-descriptor </td><td> Create an Apache Karaf Feature descriptor. </td></tr>
<tr><td> launchpad:create-bundle-jar </td><td> Create a JAR file containing the bundles in a Launchpad-structured JAR file. </td></tr>
<tr><td> launchpad:check-bundle-list-for-snapshots </td><td> Validate that the bundle list does not contain any SNAPSHOT versions. </td></tr>
<tr><td> launchpad:run </td><td> Run a Launchpad application. </td></tr>
<tr><td> launchpad:start </td><td> Start a Launchpad application. </td></tr>
<tr><td> launchpad:stop </td><td> Stop a Launchpad application. </td></tr>
<tr><td> launchpad:output-bundle-list </td><td> Output the bundle list to the console as XML. (added in version 2.0.8) </td></tr>
</tbody>
</table>
<h3><a href="#general-configuration" id="general-configuration">General Configuration</a></h3>
<p>In general, the bulk of the configuration of the Maven Launchpad Plugin is concerned with setting up the bundle list which all of the goals will use. This bundle list is created using the following steps:</p>
<ol>
<li>If <code>includeDefaultBundles</code> is <code>true</code> (the default), the default bundle list is loaded. By default, this is <code>org.apache.sling.launchpad:org.apache.sling.launchpad:RELEASE:xml:bundlelist</code>, but can be overridden by setting the <code>defaultBundleList</code> plugin parameter.</li>
<li>If <code>includeDefaultBundles</code> is <code>false</code>, an empty list is created.</li>
<li>If the bundle list file exists (by default, at <code>src/main/bundles/list.xml</code>), the bundles defined in it are added to the bundle list.</li>
<li>If the <code>additionalBundles</code> plugin parameter is defined, those bundles are added to the bundle list.</li>
<li>If the <code>bundleExclusions</code> plugin parameter is defined, those bundles are removed from the bundle list.</li>
</ol>
<p>When a bundle is added to the bundle list, if a bundle with the same groupId, artifactId, type, and classifier is already in the bundle list, the version of the existing bundle is modified. However, the start level of a bundle is never changed once that bundle is added to the bundle list.</p>
<p>The plugin may also contribute bundles to (or remove bundles from) the bundle list as it sees fit.</p>
<h3><a href="#framework-configuration" id="framework-configuration">Framework Configuration</a></h3>
<p>For the <code>run</code> and <code>start</code> goals, the plugin will look for a file named <code>src/test/config/sling.properties</code>. If this file is present, it will be filtered using standard Maven filtering and used to populate the OSGi framework properties. This can be used, for example, to specify a <code>repository.xml</code> file to be used during development:</p>
<pre><code>sling.repository.config.file.url=${basedir}/src/test/config/repository.xml
</code></pre>
<h2><a href="#bundle-list-files" id="bundle-list-files">Bundle List Files</a></h2>
<p>The bundle list file uses a simple XML syntax representing a list of bundles organized into start levels:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;bundles&gt;
    &lt;startLevel level=&quot;0&quot;&gt;
        &lt;bundle&gt;
            &lt;groupId&gt;commons-io&lt;/groupId&gt;
            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
            &lt;version&gt;1.4&lt;/version&gt;
        &lt;/bundle&gt;
        &lt;bundle&gt;
            &lt;groupId&gt;commons-collections&lt;/groupId&gt;
            &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;
            &lt;version&gt;3.2.1&lt;/version&gt;
        &lt;/bundle&gt;
    &lt;/startLevel&gt;

    &lt;startLevel level=&quot;10&quot;&gt;
        &lt;bundle&gt;
            &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
            &lt;artifactId&gt;org.apache.felix.eventadmin&lt;/artifactId&gt;
            &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;/bundle&gt;
    &lt;/startLevel&gt;

    &lt;startLevel level=&quot;15&quot;&gt;
        &lt;bundle&gt;
            &lt;groupId&gt;org.apache.sling&lt;/groupId&gt;
            &lt;artifactId&gt;org.apache.sling.jcr.api&lt;/artifactId&gt;
            &lt;version&gt;2.0.2-incubator&lt;/version&gt;
        &lt;/bundle&gt;
    &lt;/startLevel&gt;
&lt;/bundles&gt;
</code></pre>
<p>Within each <code>bundle</code> element, <code>type</code> and <code>classifier</code> are also supported.</p>
<p>The Http Service support can not be configured using the bundle list, but only using the <code>jarWebSupport</code> parameter, since it is specific to whether the Sling Launchpad is built as a java application (in which case the Jetty-based Http Service is used) or a web application (in which case the Http Service bridge is used).</p>
<h2><a href="#artifact-definition" id="artifact-definition">Artifact Definition</a></h2>
<p>The <code>defaultBundleList</code>, <code>jarWebSupport</code>, <code>additionalBundles</code>, and <code>bundleExclusions</code> parameters are configured with artifact definitions. This is done using a syntax similar to Maven dependency elements:</p>
<pre><code>&lt;configuration&gt;
...
  &lt;jarWebSupport&gt;
    &lt;groupId&gt;GROUP_ID&lt;/groupId&gt;
    &lt;artifactId&gt;ARTIFACT_ID&lt;/artifactId&gt;
    &lt;version&gt;VERSION&lt;/version&gt;
    &lt;!-- type and classifier can also be specified if needed --&gt;
  &lt;/jarWebSupport&gt;
...
&lt;/configuration&gt;
</code></pre>
<p>For example, to use Pax Web instead of Felix HttpService as the HttpService provider, use the following:</p>
<pre><code>&lt;configuration&gt;
...
  &lt;jarWebSupport&gt;
    &lt;groupId&gt;org.ops4j.pax.web&lt;/groupId&gt;
    &lt;artifactId&gt;pax-web-service&lt;/artifactId&gt;
    &lt;version&gt;RELEASE&lt;/version&gt;
    &lt;!-- type and classifier can also be specified if needed --&gt;
  &lt;/jarWebSupport&gt;
...
&lt;/configuration&gt;
</code></pre>
<p>In the case of <code>additionalBundles</code> and <code>bundleExclusions</code>, these are arrays of definitions, so an intermediate <code>bundle</code> element is necessary:</p>
<pre><code>&lt;configuration&gt;
...
  &lt;additionalBundles&gt;
    &lt;bundle&gt;
      &lt;groupId&gt;GROUP_ID&lt;/groupId&gt;
      &lt;artifactId&gt;ARTIFACT_ID&lt;/artifactId&gt;
      &lt;version&gt;VERSION&lt;/version&gt;
      &lt;!-- type and classifier can also be specified if needed --&gt;
    &lt;/bundle&gt;
  &lt;/additionalBundles&gt;
...
&lt;/configuration&gt;
</code></pre>
<p>By default, bundles are added to start level 0. To change, this use the <code>startLevel</code> element within each additional bundle definition.</p>
<h2><a href="#integration-testing" id="integration-testing">Integration Testing</a></h2>
<p>For integration testing examples, see <code>/samples/inplace-integration-test</code> and <code>launchpad/testing</code> in the Sling source tree.</p>
<h2><a href="#bundle-list-rewriting" id="bundle-list-rewriting">Bundle List Rewriting</a></h2>
<p>The Maven Launchpad Plugin supports the use of rules to rewrite the bundle list. These rules are executed by the <a href="http://www.jboss.org/drools">Drools</a> rule engine. Typically, this is used along with Maven profiles. For example, Sling's testing project includes a profile called <code>test-reactor-sling-bundles</code>. When activated, this profile runs a Drools rule file which scans the project list from the Maven reactor and modifies the version number for bundles which were contained within the reactor.</p>
<p>In order for rules to interact with the Maven build, the following global variables are made available:</p>
<ul>
<li><code>mavenSession</code> - an instance of <code>org.apache.maven.execution.MavenSession</code>.</li>
<li><code>mavenProject</code> - an instance of <code>org.apache.maven.project.MavenProject</code>.</li>
</ul>
</section></div></div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/development/maven-launchpad-plugin.md">
                            content/documentation/development/maven-launchpad-plugin.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Konrad Windszus</span> on <span class="comment">2018-07-13</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project
    logo are trademarks of The Apache Software Foundation. All other marks mentioned 
    may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright Â© 2007-2023<a href="https://www.apache.org/">
                            The Apache Software Foundation
                        </a>|<a href="https://privacy.apache.org/policies/privacy-policy-public.html">
                            Privacy Policy
                        </a>
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>