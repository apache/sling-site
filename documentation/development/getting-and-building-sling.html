<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Getting and Building Sling</title>
        <link rel="icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
	<!-- Matomo Web Analytics -->
	<script>
	var _paq = window._paq = window._paq || [];
	/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	/* We explicitly disable cookie tracking to avoid privacy issues */
	_paq.push(['disableCookies']); 
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	  var u="https://matomo.privacy.apache.org/";
	  _paq.push(['setTrackerUrl', u+'matomo.php']);
	  _paq.push(['setSiteId', '6']);
	  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<!-- End Matomo Code -->
	<link href='/pagefind/pagefind-ui.css' rel='stylesheet'><script src='/pagefind/pagefind-ui.js' type='text/javascript'></script>
	<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#searchbox" });
    });
	</script>
	
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header">
                    <a href="https://www.apache.org">
                        <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                    </a>
                </div>                
            </div><section class="searchbox level is-marginless">
                <div id="searchbox"></div>
            </section><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling12/index.html">Sling 12</a></li><li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf?s=sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/documentation.html">
                                                Documentation
                                            </a>
                                        </li><li>
                                            <a href="/documentation/development.html">
                                                Development
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/development.html">
                                        development
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            Getting and Building Sling
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row" data-pagefind-body="true"><div><section><p>A quick guide for getting the Sling source, then building and running the resulting Sling instance; either without or with Eclipse.</p>
<p>Note that you don't <em>have</em> to build Sling yourself, if you don't need the bleeding-edge stuff you can get prebuilt binaries from the <a href="/downloads.cgi">Downloads</a> page. But those, especially the starter runnable jar, are not released often and can be outdated. In case of doubt, build it yourself as shown below or ask on the Sling users mailing list.</p>
<p>Note that building the Sling starter application does not rebuild all of the modules contained in it. If you want to work on a certain module, you should rebuild it separately.</p>
<h2><a href="#tldr-short-form-build-run-instructions" id="tldr-short-form-build-run-instructions">tl:dr - Short form build + run instructions</a></h2>
<p>If you already have the required Git client, JDK and Maven installed, here's the short form recipe:</p>
<pre><code>$ git clone https://github.com/apache/sling-org-apache-sling-starter.git
$ cd sling-org-apache-sling-starter
$ mvn --update-snapshots clean install
$ export DBG=&quot;-Xmx384M -agentlib:jdwp...&quot; # (see below)
$ java $DBG -jar target/org.apache.sling.starter... # (see below)
</code></pre>
<p>With this, Sling should be running at http://localhost:8080 with remote debugging active as per the $DBG variable.</p>
<h2><a href="#prerequisites" id="prerequisites">Prerequisites</a></h2>
<p>Before you begin, you need to have the following tools installed on your system:</p>
<ul>
<li>Java 8 or higher</li>
<li><a href="http://maven.apache.org">Maven</a> 3.3.9 or later; enforced by the Sling parent pom</li>
</ul>
<p>If you want to set up an IDE any recent version of a Java IDE with Maven support will do just fine. If you're using Eclipse, you can install the [/documentation/development/ide-tooling.html](Sling IDE tooling) for some extra niceties, but it's not required in any way.</p>
<h2><a href="#configuring-maven" id="configuring-maven">Configuring Maven</a></h2>
<p>See <a href="/documentation/development/maventipsandtricks.html">MavenTipsAndTricks</a>.</p>
<h2><a href="#getting-the-sling-source" id="getting-the-sling-source">Getting the Sling Source</a></h2>
<p>The Sling source code is managed in Git using the Apache Gitbox tools: Git repositories are mirrored from GitHub to the canonical Apache Git repositories. In practice, one can work on GitHub and the replication to the Apache repositories is transparent.</p>
<p>The <a href="/repolist.html">complete list of modules</a> can be used to clone individual modules, but we provide a more convenient way of checking out all of the source modules that are used in Sling. Since that's over 2^<super>8</super> repositories, it's based on additional tooling:</p>
<ol>
<li>
<p>Install a git client if needed and the <a href="https://android.googlesource.com/tools/repo">Google Repo</a> tool.</p>
</li>
<li>
<p>Check out a new repo workspace</p>
<pre><code>$ repo init --no-clone-bundle -u https://github.com/apache/sling-aggregator.git
$ repo sync -j 16 --no-clone-bundle
</code></pre>
</li>
<li>
<p>In your IDE, import the projects you're interested in from the repo workspace.</p>
</li>
</ol>
<h2><a href="#building-sling" id="building-sling">Building Sling</a></h2>
<p>We don't yet offer a way of building all the Sling modules using a single command, but that should not be usually needed. To build any Sling module, just enter the local directory and execute</p>
<pre><code>$ mvn --update-snapshots clean install
</code></pre>
<p>Some modules may have specific build instructions, see the <code>README.md</code> file for each module.</p>
<h2><a href="#running-sling" id="running-sling">Running Sling</a></h2>
<p>The Sling project produces an executable jar with the <code>org-apache-sling-starter</code> module. After building the module, you can execute</p>
<pre><code>$ java -jar target/org.apache.sling.starter-*.jar
</code></pre>
<p>to start it up.</p>
<div class="note">
When starting Sling inside the org-apache-sling-starter module you should not use the default Sling Home folder name sling because this folder is removed when running mvn clean.
</div>
<p>Messages should now be printed to the console which is being used as the &quot;log file&quot;;</p>
<ul>
<li>the <code>-f</code> command line option is set to <code>-</code>, indicating the use of standard output as the log file.</li>
<li>the <code>-c sling</code> command line option instructs Sling to use the <code>sling</code> directory in the current directory for its data store, which is the Apache Felix bundle archive, the Jackrabbit repository data and configuration. You may also specify another directory here, either a relative or absolute path name (See also <a href="/documentation/configuration.html">Configuration</a> for more information).</li>
<li>Use the <code>-h</code> option to see the list of flags and options.</li>
</ul>
<p>After all messages have been printed you should be able to open the Sling Management Console by pointing your web browser at <a href="http://localhost:8080/system/console">http://localhost:8080/system/console</a>. You will be prompted for a user name and password. Enter <code>admin</code> for both the user name and the password (this may be set on the <em>Configuration</em> page later). From this console, you can manage the installed bundles, modify configuration objects, dump a configuration status and see some system information.</p>
<p>To stop Sling, just hit <code>Ctrl-C</code> in the console or click the <em>Stop</em> button on the <em>System Information</em> page of the Sling Management Console.</p>
<h2><a href="#making-and-deploying-changes" id="making-and-deploying-changes">Making and deploying changes</a></h2>
<p>Enter the module of the bundle you're working on, then do a build and deploy the bundle to the running launchpad instance</p>
<pre><code>    $ cd org-apache-sling-servlets-get
    $ mvn clean install sling:install
</code></pre>
<p>The Maven build command ensure that:</p>
<ul>
<li>the bundle is installed in the local repository so future builds of the launchpad module will pick it up ( <code>install</code> goal )</li>
<li>the bundle is deployed in the running launchpad instance ( <code>sling:install</code> goal )</li>
</ul>
<p>Congratulations ! You should now have a running Sling instance, that you can start playing around with.</p>
<h2><a href="#further-tips-and-tricks" id="further-tips-and-tricks">Further Tips and Tricks</a></h2>
<h3><a href="#debug-sling-in-eclipse" id="debug-sling-in-eclipse">Debug Sling in Eclipse</a></h3>
<p>You can use remote debugging to debug Sling in Eclipse, here's a little How-To</p>
<ol>
<li>
<p>start Sling from the command line with (replace N with the actual version before running the command)</p>
<p>java -Xmx384M -agentlib:jdwp=transport=dt_socket,address=30303,server=y,suspend=n -jar org.apache.sling.starter-N.jar</p>
</li>
<li>
<p>Open Menu Run-&gt; Debug configurations</p>
</li>
<li>Right-click on &quot;Remote Java Applications&quot;</li>
<li>Choose &quot;New&quot;</li>
<li>In the &quot;Connect&quot; tab choose the Eclipse Sling Project for the field &quot;Project&quot; with the browse button</li>
<li>Let the Connection type be &quot;Standard (Socket Attach)&quot;</li>
<li>The host should be localhost</li>
<li>Set the Port to 30303</li>
<li>On the source tab click the &quot;Add&quot; button</li>
<li>Select &quot;Java Project&quot;</li>
<li>Select all Sling projects and click OK</li>
<li>Click &quot;Debug&quot;</li>
</ol>
<p>Now you should be able to set breakpoints, evaluate properties, and so on as usual.</p>
<h3><a href="#debug-maven-tests-in-eclipse" id="debug-maven-tests-in-eclipse">Debug Maven Tests in Eclipse</a></h3>
<p>In the same way as you can debug the sling app, you are also able to debug a maven test. Just run the maven tests like this</p>
<pre><code>mvn -Dmaven.surefire.debug test
</code></pre>
<p>The tests will automatically pause and await a remote debugger on port 5005. You can then attach to the running tests using Eclipse. You can setup a &quot;Remote Java Application&quot; launch configuration via the menu command &quot;Run&quot; &gt; &quot;Open Debug Dialog...&quot; (see above). For more information on this see the <a href="http://maven.apache.org/plugins/maven-surefire-plugin/examples/debugging.html">Maven Surefire Docu</a>.</p>
<h3><a href="#simple-way-to-develop-new-bundle-in-eclipse-for-sling" id="simple-way-to-develop-new-bundle-in-eclipse-for-sling">Simple way to develop new bundle in Eclipse for Sling</a></h3>
<p>The easiest way that I found is to create a new folder in the existing Eclipse workspace. After that you can follow these steps:</p>
<ul>
<li>Start by copying and adapting an existing Sling pom.xml (eg. the pom.xml from the espblog sample)</li>
<li>Generate the Eclipse project files using mvn eclipse:eclipse</li>
<li>Choose File/Import in Eclipse and select &quot;Existing projects into workspace&quot;</li>
<li>Now you can create, edit and compile the files in Eclipse</li>
<li>To create the bundle jar and install it, just use the command line &quot;mvn clean install&quot; in the project directory</li>
<li>If you have a running Sling app you can install the bundle from the command line with &quot;mvn -P autoInstallBundle clean install -Dsling.url=http://localhost:8080/system/console&quot;</li>
</ul>
<p>If adding dependencies to the poms, run mvn eclipse:eclipse again and refresh the project in Eclipse. Debugging works as described above.</p>
</section></div></div><div data-pagefind-body="true" data-pagefind-weight="7.0" style="display:none;"> - ( Getting and Building Sling )</div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/documentation/development/getting-and-building-sling.md">
                            content/documentation/development/getting-and-building-sling.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Robert Munteanu</span> on <span class="comment">2018-02-03</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project
    logo are trademarks of The Apache Software Foundation. All other marks mentioned 
    may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright © 2007-2024<a href="https://www.apache.org/">
                            The Apache Software Foundation
                        </a>|<a href="https://privacy.apache.org/policies/privacy-policy-public.html">
                            Privacy Policy
                        </a>
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>