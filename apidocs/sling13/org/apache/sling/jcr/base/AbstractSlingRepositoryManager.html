<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>AbstractSlingRepositoryManager (Apache Sling 13 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.sling.jcr.base, class: AbstractSlingRepositoryManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/AbstractSlingRepositoryManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.sling.jcr.base</a></div>
<h1 title="Class AbstractSlingRepositoryManager" class="title">Class AbstractSlingRepositoryManager</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.sling.jcr.base.AbstractSlingRepositoryManager</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@ProviderType
</span><span class="modifiers">public abstract class </span><span class="element-name type-name-label">AbstractSlingRepositoryManager</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">The <code>AbstractSlingRepositoryManager</code> is the basis for controlling
 the JCR repository instances used by Sling. As a manager it starts and stops
 the actual repository instance, manages service registration and hands out
 <code>SlingRepository</code> instances to be used by the consumers.
 <p>
 This base class controls the livecycle of repository instance whereas
 implementations of this class provide actual integration into the runtime
 context. The livecycle of the repository instance is defined as follows:
 <p>
 To start the repository instance, the implementation calls the
 <a href="#start(org.osgi.framework.BundleContext,java.lang.String,boolean)"><code>start(BundleContext, String, boolean)</code></a>method which goes through the
 steps of instantiating the repository, setting things up, and registering the
 repository as an OSGi service:
 <ol>
 <li><a href="#acquireRepository()"><code>acquireRepository()</code></a></li>
 <li><a href="#create(org.osgi.framework.Bundle)"><code>create(Bundle)</code></a></li>
 <li><a href="#registerService()"><code>registerService()</code></a></li>
 </ol>
 Earlier versions of this class had an additional <code>setup</code> method,
 whatever code was there can be moved to the <code>create</code> method.
 <p>
 If starting the repository fails, the method <a href="#stoppingOnError(java.lang.String,java.lang.Throwable)"><code>stoppingOnError(String, Throwable)</code></a>
 will be called. By default the exception is logged as an error, but this can
 be customized by overwriting the method.
 <p>
 To stop the repository instance, the implementation calls the <a href="#stop()"><code>stop()</code></a>
 method which goes through the steps of unregistering the OSGi service,
 tearing all special settings down and finally shutting down the repository:
 <ol>
 <li><a href="#unregisterService(org.osgi.framework.ServiceRegistration)"><code>unregisterService(ServiceRegistration)</code></a></li>
 <li><a href="#destroy(org.apache.sling.jcr.base.AbstractSlingRepository2)"><code>destroy(AbstractSlingRepository2)</code></a></li>
 <li><a href="#disposeRepository(javax.jcr.Repository)"><code>disposeRepository(Repository)</code></a></li>
 </ol>
 <p>
 Instances of this class manage a single repository instance backing the OSGi
 service instances. Each consuming bundle, though, gets its own service
 instance backed by the single actual repository instance managed by this
 class.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>API version 2.3 (bundle version 2.2.2)</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="AbstractSlingRepositoryManager.Config.html" class="type-name-link" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a></code></div>
<div class="col-last even-row-color">
<div class="block">Configuration pojo to be passed to the <a href="#start(org.osgi.framework.BundleContext,org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config)"><code>start(BundleContext, Config)</code></a> method.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">AbstractSlingRepositoryManager</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract javax.jcr.Repository</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#acquireRepository()" class="member-name-link">acquireRepository</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates the backing JCR repository instances.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allowLoginAdministrativeForBundle(org.osgi.framework.Bundle)" class="member-name-link">allowLoginAdministrativeForBundle</a><wbr>(org.osgi.framework.Bundle&nbsp;bundle)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns whether or not the provided bundle is allowed to use
 <a href="../api/SlingRepository.html#loginAdministrative(java.lang.String)"><code>SlingRepository.loginAdministrative(String)</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#create(org.osgi.framework.Bundle)" class="member-name-link">create</a><wbr>(org.osgi.framework.Bundle&nbsp;usingBundle)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates an instance of the <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
 implementation for use by the given <code>usingBundle</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#destroy(org.apache.sling.jcr.base.AbstractSlingRepository2)" class="member-name-link">destroy</a><wbr>(<a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a>&nbsp;repositoryServiceInstance)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Cleans up the given <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> instance previously
 created by the <a href="#create(org.osgi.framework.Bundle)"><code>create(Bundle)</code></a> method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#disposeRepository(javax.jcr.Repository)" class="member-name-link">disposeRepository</a><wbr>(javax.jcr.Repository&nbsp;repository)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Disposes off the given <code>repository</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDefaultWorkspace()" class="member-name-link">getDefaultWorkspace</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the default workspace, which may be <code>null</code> meaning to
 use the repository provided default workspace.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final javax.jcr.Repository</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRepository()" class="member-name-link">getRepository</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the repository underlying this instance or <code>null</code> if
 no repository is currently being available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getServiceRegistrationInterfaces()" class="member-name-link">getServiceRegistrationInterfaces</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the service types to be used to register the repository service
 in <a href="#registerService()"><code>registerService()</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Dictionary.html" title="class or interface in java.util" class="external-link">Dictionary</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getServiceRegistrationProperties()" class="member-name-link">getServiceRegistrationProperties</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Return the service registration properties to be used to register the
 repository service in <a href="#registerService()"><code>registerService()</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="../../serviceusermapping/ServiceUserMapper.html" title="interface in org.apache.sling.serviceusermapping">ServiceUserMapper</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getServiceUserMapper()" class="member-name-link">getServiceUserMapper</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the <code>ServiceUserMapper</code> service to map the service name to
 a service user name.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isDisableLoginAdministrative()" class="member-name-link">isDisableLoginAdministrative</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns whether to disable the
 <code>SlingRepository.loginAdministrative</code> method or not.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final org.osgi.framework.ServiceRegistration</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#registerService()" class="member-name-link">registerService</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Registers this component as an OSGi service with the types provided by
 the <a href="#getServiceRegistrationInterfaces()"><code>getServiceRegistrationInterfaces()</code></a> method and properties
 provided by the <a href="#getServiceRegistrationProperties()"><code>getServiceRegistrationProperties()</code></a> method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code>protected final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#start(org.osgi.framework.BundleContext,java.lang.String,boolean)" class="member-name-link">start</a><wbr>(org.osgi.framework.BundleContext&nbsp;bundleContext,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;defaultWorkspace,
 boolean&nbsp;disableLoginAdministrative)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">use <a href="#start(org.osgi.framework.BundleContext,org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config)"><code>start(BundleContext, AbstractSlingRepositoryManager.Config)</code></a> instead.</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#start(org.osgi.framework.BundleContext,org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config)" class="member-name-link">start</a><wbr>(org.osgi.framework.BundleContext&nbsp;bundleContext,
 <a href="AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a>&nbsp;config)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method actually starts the backing repository instannce and
 registeres the repository service.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stop()" class="member-name-link">stop</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stoppingOnError(java.lang.String,java.lang.Throwable)" class="member-name-link">stoppingOnError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when the repository service cannot be initialized or registered
 because an exception occurred.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unregisterService(org.osgi.framework.ServiceRegistration)" class="member-name-link">unregisterService</a><wbr>(org.osgi.framework.ServiceRegistration&nbsp;serviceRegistration)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Unregisters the service represented by the
 <code>serviceRegistration</code>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>AbstractSlingRepositoryManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">AbstractSlingRepositoryManager</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDefaultWorkspace()">
<h3>getDefaultWorkspace</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getDefaultWorkspace</span>()</div>
<div class="block">Returns the default workspace, which may be <code>null</code> meaning to
 use the repository provided default workspace.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the default workspace or <code>null</code> indicating the repository's
         default workspace is actually used.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isDisableLoginAdministrative()">
<h3>isDisableLoginAdministrative</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDisableLoginAdministrative</span>()</div>
<div class="block">Returns whether to disable the
 <code>SlingRepository.loginAdministrative</code> method or not.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if <code>SlingRepository.loginAdministrative</code> is
         disabled.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getServiceUserMapper()">
<h3>getServiceUserMapper</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="../../serviceusermapping/ServiceUserMapper.html" title="interface in org.apache.sling.serviceusermapping">ServiceUserMapper</a></span>&nbsp;<span class="element-name">getServiceUserMapper</span>()</div>
<div class="block">Returns the <code>ServiceUserMapper</code> service to map the service name to
 a service user name.
 <p>
 The <code>ServiceUserMapper</code> is used to implement the
 <a href="AbstractSlingRepository2.html#loginService(java.lang.String,java.lang.String)"><code>AbstractSlingRepository2.loginService(String, String)</code></a> method used
 to replace the
 <a href="AbstractSlingRepository2.html#loginAdministrative(java.lang.String)"><code>AbstractSlingRepository2.loginAdministrative(String)</code></a> method. If
 this method returns <code>null</code> and hence the
 <code>ServiceUserMapperService</code> is not available, the
 <code>loginService</code> method is not able to login.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The <code>ServiceUserMapper</code> service or <code>null</code> if not
         available.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="AbstractSlingRepository2.html#loginService(java.lang.String,java.lang.String)"><code>AbstractSlingRepository2.loginService(String, String)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="allowLoginAdministrativeForBundle(org.osgi.framework.Bundle)">
<h3>allowLoginAdministrativeForBundle</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">allowLoginAdministrativeForBundle</span><wbr><span class="parameters">(org.osgi.framework.Bundle&nbsp;bundle)</span></div>
<div class="block">Returns whether or not the provided bundle is allowed to use
 <a href="../api/SlingRepository.html#loginAdministrative(java.lang.String)"><code>SlingRepository.loginAdministrative(String)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bundle</code> - The bundle requiring access to <code>loginAdministrative</code></dd>
<dt>Returns:</dt>
<dd>A boolean value indicating whether or not the bundle is allowed
         to use <code>loginAdministrative</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="acquireRepository()">
<h3>acquireRepository</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">javax.jcr.Repository</span>&nbsp;<span class="element-name">acquireRepository</span>()</div>
<div class="block">Creates the backing JCR repository instances. It is expected for this
 method to just start the repository.
 <p>
 This method does not throw any <code>Throwable</code> but instead just
 returns <code>null</code> if not repository is available. Any problems
 trying to acquire the repository must be caught and logged as
 appropriate.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The acquired JCR <code>Repository</code> or <code>null</code> if
         not repository can be acquired.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#start(org.osgi.framework.BundleContext,java.lang.String,boolean)"><code>start(BundleContext, String, boolean)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="registerService()">
<h3>registerService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">org.osgi.framework.ServiceRegistration</span>&nbsp;<span class="element-name">registerService</span>()</div>
<div class="block">Registers this component as an OSGi service with the types provided by
 the <a href="#getServiceRegistrationInterfaces()"><code>getServiceRegistrationInterfaces()</code></a> method and properties
 provided by the <a href="#getServiceRegistrationProperties()"><code>getServiceRegistrationProperties()</code></a> method.
 <p>
 The repository is actually registered as an OSGi <code>ServiceFactory</code>
 where the <a href="#create(org.osgi.framework.Bundle)"><code>create(Bundle)</code></a> method is called to create an actual
 <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> repository instance for a calling
 (using) bundle. When the bundle is done using the repository instance,
 the <a href="#destroy(org.apache.sling.jcr.base.AbstractSlingRepository2)"><code>destroy(AbstractSlingRepository2)</code></a> method is called to clean
 up.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The OSGi <code>ServiceRegistration</code> object representing the
         registered service.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#start(org.osgi.framework.BundleContext,java.lang.String,boolean)"><code>start(BundleContext, String, boolean)</code></a></li>
<li><a href="#getServiceRegistrationInterfaces()"><code>getServiceRegistrationInterfaces()</code></a></li>
<li><a href="#getServiceRegistrationProperties()"><code>getServiceRegistrationProperties()</code></a></li>
<li><a href="#create(org.osgi.framework.Bundle)"><code>create(Bundle)</code></a></li>
<li><a href="#destroy(org.apache.sling.jcr.base.AbstractSlingRepository2)"><code>destroy(AbstractSlingRepository2)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getServiceRegistrationProperties()">
<h3>getServiceRegistrationProperties</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Dictionary.html" title="class or interface in java.util" class="external-link">Dictionary</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</span>&nbsp;<span class="element-name">getServiceRegistrationProperties</span>()</div>
<div class="block">Return the service registration properties to be used to register the
 repository service in <a href="#registerService()"><code>registerService()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The service registration properties to be used to register the
         repository service in <a href="#registerService()"><code>registerService()</code></a></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#registerService()"><code>registerService()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getServiceRegistrationInterfaces()">
<h3>getServiceRegistrationInterfaces</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">getServiceRegistrationInterfaces</span>()</div>
<div class="block">Returns the service types to be used to register the repository service
 in <a href="#registerService()"><code>registerService()</code></a>. All interfaces returned must be accessible
 to the class loader of the class of this instance.
 <p>
 This method may be overwritten to return additional types but the types
 returned from this base implementation, <code>SlingRepository</code> and
 <code>Repository</code>, must always be included.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The service types to be used to register the repository service
         in <a href="#registerService()"><code>registerService()</code></a></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#registerService()"><code>registerService()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="create(org.osgi.framework.Bundle)">
<h3>create</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a></span>&nbsp;<span class="element-name">create</span><wbr><span class="parameters">(org.osgi.framework.Bundle&nbsp;usingBundle)</span></div>
<div class="block">Creates an instance of the <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
 implementation for use by the given <code>usingBundle</code>.
 <p>
 This method is called when the repository service is requested from
 within the using bundle for the first time.
 <p>
 This method is expected to return a new instance on every call.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>usingBundle</code> - The bundle providing from which the repository is
            requested.</dd>
<dt>Returns:</dt>
<dd>The <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> implementation instance to
         be used by the <code>usingBundle</code>.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#registerService()"><code>registerService()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="destroy(org.apache.sling.jcr.base.AbstractSlingRepository2)">
<h3>destroy</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">destroy</span><wbr><span class="parameters">(<a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a>&nbsp;repositoryServiceInstance)</span></div>
<div class="block">Cleans up the given <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> instance previously
 created by the <a href="#create(org.osgi.framework.Bundle)"><code>create(Bundle)</code></a> method.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>repositoryServiceInstance</code> - The <a href="AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
            istance to cleanup.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#registerService()"><code>registerService()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRepository()">
<h3>getRepository</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">javax.jcr.Repository</span>&nbsp;<span class="element-name">getRepository</span>()</div>
<div class="block">Returns the repository underlying this instance or <code>null</code> if
 no repository is currently being available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The repository</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unregisterService(org.osgi.framework.ServiceRegistration)">
<h3>unregisterService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">unregisterService</span><wbr><span class="parameters">(org.osgi.framework.ServiceRegistration&nbsp;serviceRegistration)</span></div>
<div class="block">Unregisters the service represented by the
 <code>serviceRegistration</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serviceRegistration</code> - The service to unregister</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="disposeRepository(javax.jcr.Repository)">
<h3>disposeRepository</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">disposeRepository</span><wbr><span class="parameters">(javax.jcr.Repository&nbsp;repository)</span></div>
<div class="block">Disposes off the given <code>repository</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>repository</code> - The repository to be disposed off which is the same as
            the one returned from <a href="#acquireRepository()"><code>acquireRepository()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="stoppingOnError(java.lang.String,java.lang.Throwable)">
<h3>stoppingOnError</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stoppingOnError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;t)</span></div>
<div class="block">Called when the repository service cannot be initialized or registered
 because an exception occurred.
 <p>
 This default implementation logs the exception as an error.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - failure details.</dd>
<dd><code>t</code> - the exception.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start(org.osgi.framework.BundleContext,java.lang.String,boolean)">
<h3>start</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">start</span><wbr><span class="parameters">(org.osgi.framework.BundleContext&nbsp;bundleContext,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;defaultWorkspace,
 boolean&nbsp;disableLoginAdministrative)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">use <a href="#start(org.osgi.framework.BundleContext,org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config)"><code>start(BundleContext, AbstractSlingRepositoryManager.Config)</code></a> instead.</div>
</div>
<div class="block">This method was deprecated with the introduction of asynchronous repository registration. With
 asynchronous registration a boolean return value can no longer be guaranteed, as registration
 may happen after the method returns.
 <p>
 Instead a <code>ServiceListener</code> for <a href="../api/SlingRepository.html" title="interface in org.apache.sling.jcr.api"><code>SlingRepository</code></a> may be
 registered to get informed about its successful registration.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bundleContext</code> - The <code>BundleContext</code> to register the repository
            service (and optionally more services required to operate the
            repository)</dd>
<dd><code>defaultWorkspace</code> - The name of the default workspace to use to
            login. This may be <code>null</code> to have the actual repository
            instance define its own default</dd>
<dd><code>disableLoginAdministrative</code> - Whether to disable the
            <code>SlingRepository.loginAdministrative</code> method or not.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the repository has been started and the service
         is registered; <code>false</code> if the service has not been registered,
         which may indicate that startup was unsuccessful OR that it is happening
         asynchronously. A more reliable way to determin availability of the
         <a href="../api/SlingRepository.html" title="interface in org.apache.sling.jcr.api"><code>SlingRepository</code></a> as a service is using a
         <code>ServiceListener</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start(org.osgi.framework.BundleContext,org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config)">
<h3>start</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">start</span><wbr><span class="parameters">(org.osgi.framework.BundleContext&nbsp;bundleContext,
 <a href="AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a>&nbsp;config)</span></div>
<div class="block">This method actually starts the backing repository instannce and
 registeres the repository service.
 <p>
 Multiple subsequent calls to this method without calling <a href="#stop()"><code>stop()</code></a>
 first have no effect.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bundleContext</code> - The <code>BundleContext</code> to register the repository
            service (and optionally more services required to operate the
            repository)</dd>
<dd><code>config</code> - The configuration to apply to this instance.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="stop()">
<h3>stop</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stop</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
