<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>SlingRepository (Apache Sling 13 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.sling.jcr.api, interface: SlingRepository">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SlingRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.sling.jcr.api</a></div>
<h1 title="Interface SlingRepository" class="title">Interface SlingRepository</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code>javax.jcr.Repository</code></dd>
</dl>
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="../base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@ProviderType
</span><span class="modifiers">public interface </span><span class="element-name type-name-label">SlingRepository</span><span class="extends-implements">
extends javax.jcr.Repository</span></div>
<div class="block">The <code>SlingRepository</code> extends the standard JCR repository
 interface with two methods: <a href="#getDefaultWorkspace()"><code>getDefaultWorkspace()</code></a> and
 <a href="#loginAdministrative(java.lang.String)"><code>loginAdministrative(String)</code></a>. This method ease the use of a JCR
 repository in a Sling application in that the default (or standard) workspace
 to use by the application may be configured and application bundles may use a
 simple method to get an administrative session instead of being required to
 provide their own configuration of administrative session details.
 <p>
 Implementations of this interface will generally provide configurability of
 the default workspace name as well as the access details for the
 administrative session.
 <p>
 Implementations of SlingRepository are expected to invoke any available
 implementations of the <a href="NamespaceMapper.html" title="interface in org.apache.sling.jcr.api"><code>NamespaceMapper</code></a> interface <b>before</b>
 returning <b>any</b> <code>Session</code> to callers. This includes the methods
 defined in the <code>Repository</code> interface.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-javax.jcr.Repository">Fields inherited from interface&nbsp;javax.jcr.Repository</h3>
<code>IDENTIFIER_STABILITY, IDENTIFIER_STABILITY_INDEFINITE_DURATION, IDENTIFIER_STABILITY_METHOD_DURATION, IDENTIFIER_STABILITY_SAVE_DURATION, IDENTIFIER_STABILITY_SESSION_DURATION, LEVEL_1_SUPPORTED, LEVEL_2_SUPPORTED, NODE_TYPE_MANAGEMENT_AUTOCREATED_DEFINITIONS_SUPPORTED, NODE_TYPE_MANAGEMENT_INHERITANCE, NODE_TYPE_MANAGEMENT_INHERITANCE_MINIMAL, NODE_TYPE_MANAGEMENT_INHERITANCE_MULTIPLE, NODE_TYPE_MANAGEMENT_INHERITANCE_SINGLE, NODE_TYPE_MANAGEMENT_MULTIPLE_BINARY_PROPERTIES_SUPPORTED, NODE_TYPE_MANAGEMENT_MULTIVALUED_PROPERTIES_SUPPORTED, NODE_TYPE_MANAGEMENT_ORDERABLE_CHILD_NODES_SUPPORTED, NODE_TYPE_MANAGEMENT_OVERRIDES_SUPPORTED, NODE_TYPE_MANAGEMENT_PRIMARY_ITEM_NAME_SUPPORTED, NODE_TYPE_MANAGEMENT_PROPERTY_TYPES, NODE_TYPE_MANAGEMENT_RESIDUAL_DEFINITIONS_SUPPORTED, NODE_TYPE_MANAGEMENT_SAME_NAME_SIBLINGS_SUPPORTED, NODE_TYPE_MANAGEMENT_UPDATE_IN_USE_SUPORTED, NODE_TYPE_MANAGEMENT_VALUE_CONSTRAINTS_SUPPORTED, OPTION_ACCESS_CONTROL_SUPPORTED, OPTION_ACTIVITIES_SUPPORTED, OPTION_BASELINES_SUPPORTED, OPTION_JOURNALED_OBSERVATION_SUPPORTED, OPTION_LIFECYCLE_SUPPORTED, OPTION_LOCKING_SUPPORTED, OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED, OPTION_NODE_TYPE_MANAGEMENT_SUPPORTED, OPTION_OBSERVATION_SUPPORTED, OPTION_QUERY_SQL_SUPPORTED, OPTION_RETENTION_SUPPORTED, OPTION_SHAREABLE_NODES_SUPPORTED, OPTION_SIMPLE_VERSIONING_SUPPORTED, OPTION_TRANSACTIONS_SUPPORTED, OPTION_UNFILED_CONTENT_SUPPORTED, OPTION_UPDATE_MIXIN_NODE_TYPES_SUPPORTED, OPTION_UPDATE_PRIMARY_NODE_TYPE_SUPPORTED, OPTION_VERSIONING_SUPPORTED, OPTION_WORKSPACE_MANAGEMENT_SUPPORTED, OPTION_XML_EXPORT_SUPPORTED, OPTION_XML_IMPORT_SUPPORTED, QUERY_FULL_TEXT_SEARCH_SUPPORTED, QUERY_JOINS, QUERY_JOINS_INNER, QUERY_JOINS_INNER_OUTER, QUERY_JOINS_NONE, QUERY_LANGUAGES, QUERY_STORED_QUERIES_SUPPORTED, QUERY_XPATH_DOC_ORDER, QUERY_XPATH_POS_INDEX, REP_NAME_DESC, REP_VENDOR_DESC, REP_VENDOR_URL_DESC, REP_VERSION_DESC, SPEC_NAME_DESC, SPEC_VERSION_DESC, WRITE_SUPPORTED</code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>@Nullable <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getDefaultWorkspace()" class="member-name-link">getDefaultWorkspace</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the default workspace to use on login.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>@NotNull javax.jcr.Session</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#impersonateFromService(java.lang.String,javax.jcr.Credentials,java.lang.String)" class="member-name-link">impersonateFromService</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subServiceName,
 @NotNull javax.jcr.Credentials&nbsp;credentials,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspaceName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Impersonates the service session provided by the calling bundle (and further
 specialized by <code>subServiceName</code>) to a new session in accordance with
 the specified (new) <code>Credentials</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3 method-summary-table-tab6"><code>@NotNull javax.jcr.Session</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3 method-summary-table-tab6"><code><a href="#loginAdministrative(java.lang.String)" class="member-name-link">loginAdministrative</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspace)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">as of 2.2 (bundle version 2.2.0) because of inherent security
             issues.</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>@NotNull javax.jcr.Session</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#loginService(java.lang.String,java.lang.String)" class="member-name-link">loginService</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subServiceName,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspace)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a session to the given workspace with privileges assigned to the
 service provided by the calling bundle.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-javax.jcr.Repository">Methods inherited from interface&nbsp;javax.jcr.Repository</h3>
<code>getDescriptor, getDescriptorKeys, getDescriptorValue, getDescriptorValues, isSingleValueDescriptor, isStandardDescriptor, login, login, login, login</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDefaultWorkspace()">
<h3>getDefaultWorkspace</h3>
<div class="member-signature"><span class="annotations">@Nullable
</span><span class="return-type">@Nullable <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getDefaultWorkspace</span>()</div>
<div class="block">Returns the default workspace to use on login.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null if the configured default workspace name is empty, SLING-256</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loginAdministrative(java.lang.String)">
<h3>loginAdministrative</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
@NotNull
</span><span class="return-type">@NotNull javax.jcr.Session</span>&nbsp;<span class="element-name">loginAdministrative</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspace)</span>
                                        throws <span class="exceptions">javax.jcr.LoginException,
javax.jcr.RepositoryException</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">as of 2.2 (bundle version 2.2.0) because of inherent security
             issues. Services requiring specific permissions should use
             the <a href="#loginService(java.lang.String,java.lang.String)"><code>loginService(String, String)</code></a> instead.</div>
</div>
<div class="block">Returns a session to the given workspace which has administrative powers.
 <p>
 <b><i>NOTE: This method is intended for use by infrastructure bundles to
 access the repository and provide general services. This method MUST not
 be used to handle client requests of whatever kinds. To handle client
 requests a regular authenticated session retrieved through
 <code>Repository.login(javax.jcr.Credentials, String)</code> or
 <code>Session.impersonate(javax.jcr.Credentials)</code> must be used.</i></b>
 <p>
 This method is deprecated. Services running in the Sling system should
 use the <a href="#loginService(java.lang.String,java.lang.String)"><code>loginService(String serviceInfo, String workspace)</code></a>
 method instead. Implementations of this method must throw
 <code>javax.jcr.LoginException</code> if they don't support it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>workspace</code> - The name of the workspace to which to get an
            administrative session. If <code>null</code> the
            <a href="#getDefaultWorkspace()"><code>getDefaultWorkspace()</code></a> default workspace is assumed.</dd>
<dt>Returns:</dt>
<dd>The administrative Session</dd>
<dt>Throws:</dt>
<dd><code>javax.jcr.LoginException</code> - If this method is not supported or is disabled by
             the implementation.</dd>
<dd><code>javax.jcr.RepositoryException</code> - If an error occurs creating the
             administrative session</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loginService(java.lang.String,java.lang.String)">
<h3>loginService</h3>
<div class="member-signature"><span class="annotations">@NotNull
</span><span class="return-type">@NotNull javax.jcr.Session</span>&nbsp;<span class="element-name">loginService</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subServiceName,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspace)</span>
                                 throws <span class="exceptions">javax.jcr.LoginException,
javax.jcr.RepositoryException</span></div>
<div class="block">Returns a session to the given workspace with privileges assigned to the
 service provided by the calling bundle. The <code>subServiceName</code>
 argument can be used to further specialize the service account to be
 used.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subServiceName</code> - Optional Subservice Name to specialize account
            selection for the service. This may be <code>null</code>.</dd>
<dd><code>workspace</code> - The name of the workspace to which to get an
            administrative session. If <code>null</code> the
            <a href="#getDefaultWorkspace()"><code>getDefaultWorkspace()</code></a> default workspace is assumed.</dd>
<dt>Returns:</dt>
<dd>A Session with appropriate permissions to execute the service.</dd>
<dt>Throws:</dt>
<dd><code>javax.jcr.LoginException</code> - If there is no service account defined for the
             calling bundle or the defined service account does not exist.</dd>
<dd><code>javax.jcr.RepositoryException</code> - if an error occurs.</dd>
<dt>Since:</dt>
<dd>2.2 (bundle version 2.2.0) to replace
        <a href="#loginAdministrative(java.lang.String)"><code>loginAdministrative(String)</code></a></dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="http://sling.apache.org/documentation/the-sling-engine/service-authentication.html">Service
      Authentication</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="impersonateFromService(java.lang.String,javax.jcr.Credentials,java.lang.String)">
<h3>impersonateFromService</h3>
<div class="member-signature"><span class="annotations">@NotNull
</span><span class="return-type">@NotNull javax.jcr.Session</span>&nbsp;<span class="element-name">impersonateFromService</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;subServiceName,
 @NotNull
 @NotNull javax.jcr.Credentials&nbsp;credentials,
 <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;workspaceName)</span>
                                           throws <span class="exceptions">javax.jcr.LoginException,
javax.jcr.RepositoryException</span></div>
<div class="block">Impersonates the service session provided by the calling bundle (and further
 specialized by <code>subServiceName</code>) to a new session in accordance with
 the specified (new) <code>Credentials</code>. The nature of the <code>Credentials</code>
 is an implementation detail which may allow relaxed credentials
 requirements (perhaps including a user ID but no password, for example).
 <p>
 The impersonation will fail with <code>LoginException</code> if the
 service session is not allowed to impersonate the subject associated with
 the target session or if the specified <code>Credentials credentials</code>
 are not valid.
 </p>
 The new, impersonated <code>Session</code> is tied to a new <code>Workspace</code>
 instance with the specified <code>workspaceName</code> or to the
 <a href="#getDefaultWorkspace()"><code>default workspace</code></a> if the <code>workspaceName</code>
 is <code>null</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>subServiceName</code> - Optional sub-service name to specialize account
                       selection for the service. This may be <code>null</code>.</dd>
<dd><code>credentials</code> - A valid non-null <code>Credentials</code> object</dd>
<dd><code>workspaceName</code> - The name of the workspace to which to get an
                       administrative session. If <code>null</code> the
                       <a href="#getDefaultWorkspace()"><code>getDefaultWorkspace()</code></a> default workspace is assumed.</dd>
<dt>Returns:</dt>
<dd>a new <code>Session</code> object</dd>
<dt>Throws:</dt>
<dd><code>javax.jcr.LoginException</code> - If the current session does not have sufficient access to perform the operation.</dd>
<dd><code>javax.jcr.RepositoryException</code> - If another error occurs.</dd>
<dt>Since:</dt>
<dd>2.3</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
