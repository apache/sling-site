<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AbstractSlingRepositoryManager (Apache Sling 12 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractSlingRepositoryManager (Apache Sling 12 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":10,"i2":6,"i3":6,"i4":6,"i5":10,"i6":10,"i7":10,"i8":6,"i9":6,"i10":10,"i11":10,"i12":10,"i13":42,"i14":10,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractSlingRepositoryManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html" target="_top">Frames</a></li>
<li><a href="AbstractSlingRepositoryManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.sling.jcr.base</div>
<h2 title="Class AbstractSlingRepositoryManager" class="title">Class AbstractSlingRepositoryManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.sling.jcr.base.AbstractSlingRepositoryManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@ProviderType
public abstract class <span class="typeNameLabel">AbstractSlingRepositoryManager</span>
extends java.lang.Object</pre>
<div class="block">The <code>AbstractSlingRepositoryManager</code> is the basis for controlling
 the JCR repository instances used by Sling. As a manager it starts and stops
 the actual repository instance, manages service registration and hands out
 <code>SlingRepository</code> instances to be used by the consumers.
 <p>
 This base class controls the livecycle of repository instance whereas
 implementations of this class provide actual integration into the runtime
 context. The livecycle of the repository instance is defined as follows:
 <p>
 To start the repository instance, the implementation calls the
 <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-java.lang.String-boolean-"><code>start(BundleContext, String, boolean)</code></a>method which goes through the
 steps of instantiating the repository, setting things up, and registering the
 repository as an OSGi service:
 <ol>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#acquireRepository--"><code>acquireRepository()</code></a></li>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-"><code>create(Bundle)</code></a></li>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></li>
 </ol>
 Earlier versions of this class had an additional <code>setup</code> method,
 whatever code was there can be moved to the <code>create</code> method.
 <p>
 If starting the repository fails, the method <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#stoppingOnError-java.lang.String-java.lang.Throwable-"><code>stoppingOnError(String, Throwable)</code></a>
 will be called. By default the exception is logged as an error, but this can
 be customized by overwriting the method.
 <p>
 To stop the repository instance, the implementation calls the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#stop--"><code>stop()</code></a>
 method which goes through the steps of unregistering the OSGi service,
 tearing all special settings down and finally shutting down the repository:
 <ol>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#unregisterService-org.osgi.framework.ServiceRegistration-"><code>unregisterService(ServiceRegistration)</code></a></li>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#destroy-org.apache.sling.jcr.base.AbstractSlingRepository2-"><code>destroy(AbstractSlingRepository2)</code></a></li>
 <li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#disposeRepository-javax.jcr.Repository-"><code>disposeRepository(Repository)</code></a></li>
 </ol>
 <p>
 Instances of this class manage a single repository instance backing the OSGi
 service instances. Each consuming bundle, though, gets its own service
 instance backed by the single actual repository instance managed by this
 class.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>API version 2.3 (bundle version 2.2.2)</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a></span></code>
<div class="block">Configuration pojo to be passed to the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config-"><code>start(BundleContext, Config)</code></a> method.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#AbstractSlingRepositoryManager--">AbstractSlingRepositoryManager</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected abstract javax.jcr.Repository</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#acquireRepository--">acquireRepository</a></span>()</code>
<div class="block">Creates the backing JCR repository instances.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#allowLoginAdministrativeForBundle-org.osgi.framework.Bundle-">allowLoginAdministrativeForBundle</a></span>(org.osgi.framework.Bundle&nbsp;bundle)</code>
<div class="block">Returns whether or not the provided bundle is allowed to use
 <a href="../../../../../org/apache/sling/jcr/api/SlingRepository.html#loginAdministrative-java.lang.String-"><code>SlingRepository.loginAdministrative(String)</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected abstract <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-">create</a></span>(org.osgi.framework.Bundle&nbsp;usingBundle)</code>
<div class="block">Creates an instance of the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
 implementation for use by the given <code>usingBundle</code>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#destroy-org.apache.sling.jcr.base.AbstractSlingRepository2-">destroy</a></span>(<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a>&nbsp;repositoryServiceInstance)</code>
<div class="block">Cleans up the given <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> instance previously
 created by the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-"><code>create(Bundle)</code></a> method.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#disposeRepository-javax.jcr.Repository-">disposeRepository</a></span>(javax.jcr.Repository&nbsp;repository)</code>
<div class="block">Disposes off the given <code>repository</code>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getDefaultWorkspace--">getDefaultWorkspace</a></span>()</code>
<div class="block">Returns the default workspace, which may be <code>null</code> meaning to
 use the repository provided default workspace.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected javax.jcr.Repository</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getRepository--">getRepository</a></span>()</code>
<div class="block">Returns the repository underlying this instance or <code>null</code> if
 no repository is currently being available.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationInterfaces--">getServiceRegistrationInterfaces</a></span>()</code>
<div class="block">Returns the service types to be used to register the repository service
 in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected abstract java.util.Dictionary&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationProperties--">getServiceRegistrationProperties</a></span>()</code>
<div class="block">Return the service registration properties to be used to register the
 repository service in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="../../../../../org/apache/sling/serviceusermapping/ServiceUserMapper.html" title="interface in org.apache.sling.serviceusermapping">ServiceUserMapper</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceUserMapper--">getServiceUserMapper</a></span>()</code>
<div class="block">Returns the <code>ServiceUserMapper</code> service to map the service name to
 a service user name.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#isDisableLoginAdministrative--">isDisableLoginAdministrative</a></span>()</code>
<div class="block">Returns whether to disable the
 <code>SlingRepository.loginAdministrative</code> method or not.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected org.osgi.framework.ServiceRegistration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--">registerService</a></span>()</code>
<div class="block">Registers this component as an OSGi service with the types provided by
 the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationInterfaces--"><code>getServiceRegistrationInterfaces()</code></a> method and properties
 provided by the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationProperties--"><code>getServiceRegistrationProperties()</code></a> method.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config-">start</a></span>(org.osgi.framework.BundleContext&nbsp;bundleContext,
     <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a>&nbsp;config)</code>
<div class="block">This method actually starts the backing repository instannce and
 registeres the repository service.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-java.lang.String-boolean-">start</a></span>(org.osgi.framework.BundleContext&nbsp;bundleContext,
     java.lang.String&nbsp;defaultWorkspace,
     boolean&nbsp;disableLoginAdministrative)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">use <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config-"><code>start(BundleContext, AbstractSlingRepositoryManager.Config)</code></a> instead.</span></div>
</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#stop--">stop</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#stoppingOnError-java.lang.String-java.lang.Throwable-">stoppingOnError</a></span>(java.lang.String&nbsp;message,
               java.lang.Throwable&nbsp;t)</code>
<div class="block">Called when the repository service cannot be initialized or registered
 because an exception occurred.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#unregisterService-org.osgi.framework.ServiceRegistration-">unregisterService</a></span>(org.osgi.framework.ServiceRegistration&nbsp;serviceRegistration)</code>
<div class="block">Unregisters the service represented by the
 <code>serviceRegistration</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractSlingRepositoryManager--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractSlingRepositoryManager</h4>
<pre>public&nbsp;AbstractSlingRepositoryManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDefaultWorkspace--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultWorkspace</h4>
<pre>public final&nbsp;java.lang.String&nbsp;getDefaultWorkspace()</pre>
<div class="block">Returns the default workspace, which may be <code>null</code> meaning to
 use the repository provided default workspace.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the default workspace or <code>null</code> indicating the repository's
         default workspace is actually used.</dd>
</dl>
</li>
</ul>
<a name="isDisableLoginAdministrative--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDisableLoginAdministrative</h4>
<pre>public final&nbsp;boolean&nbsp;isDisableLoginAdministrative()</pre>
<div class="block">Returns whether to disable the
 <code>SlingRepository.loginAdministrative</code> method or not.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if <code>SlingRepository.loginAdministrative</code> is
         disabled.</dd>
</dl>
</li>
</ul>
<a name="getServiceUserMapper--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceUserMapper</h4>
<pre>protected abstract&nbsp;<a href="../../../../../org/apache/sling/serviceusermapping/ServiceUserMapper.html" title="interface in org.apache.sling.serviceusermapping">ServiceUserMapper</a>&nbsp;getServiceUserMapper()</pre>
<div class="block">Returns the <code>ServiceUserMapper</code> service to map the service name to
 a service user name.
 <p>
 The <code>ServiceUserMapper</code> is used to implement the
 <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html#loginService-java.lang.String-java.lang.String-"><code>AbstractSlingRepository2.loginService(String, String)</code></a> method used
 to replace the
 <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html#loginAdministrative-java.lang.String-"><code>AbstractSlingRepository2.loginAdministrative(String)</code></a> method. If
 this method returns <code>null</code> and hence the
 <code>ServiceUserMapperService</code> is not available, the
 <code>loginService</code> method is not able to login.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <code>ServiceUserMapper</code> service or <code>null</code> if not
         available.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html#loginService-java.lang.String-java.lang.String-"><code>AbstractSlingRepository2.loginService(String, String)</code></a></dd>
</dl>
</li>
</ul>
<a name="allowLoginAdministrativeForBundle-org.osgi.framework.Bundle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allowLoginAdministrativeForBundle</h4>
<pre>protected&nbsp;boolean&nbsp;allowLoginAdministrativeForBundle(org.osgi.framework.Bundle&nbsp;bundle)</pre>
<div class="block">Returns whether or not the provided bundle is allowed to use
 <a href="../../../../../org/apache/sling/jcr/api/SlingRepository.html#loginAdministrative-java.lang.String-"><code>SlingRepository.loginAdministrative(String)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bundle</code> - The bundle requiring access to <code>loginAdministrative</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A boolean value indicating whether or not the bundle is allowed
         to use <code>loginAdministrative</code>.</dd>
</dl>
</li>
</ul>
<a name="acquireRepository--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireRepository</h4>
<pre>protected abstract&nbsp;javax.jcr.Repository&nbsp;acquireRepository()</pre>
<div class="block">Creates the backing JCR repository instances. It is expected for this
 method to just start the repository.
 <p>
 This method does not throw any <code>Throwable</code> but instead just
 returns <code>null</code> if not repository is available. Any problems
 trying to acquire the repository must be caught and logged as
 appropriate.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The acquired JCR <code>Repository</code> or <code>null</code> if
         not repository can be acquired.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-java.lang.String-boolean-"><code>start(BundleContext, String, boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="registerService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerService</h4>
<pre>protected final&nbsp;org.osgi.framework.ServiceRegistration&nbsp;registerService()</pre>
<div class="block">Registers this component as an OSGi service with the types provided by
 the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationInterfaces--"><code>getServiceRegistrationInterfaces()</code></a> method and properties
 provided by the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationProperties--"><code>getServiceRegistrationProperties()</code></a> method.
 <p>
 The repository is actually registered as an OSGi <code>ServiceFactory</code>
 where the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-"><code>create(Bundle)</code></a> method is called to create an actual
 <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> repository instance for a calling
 (using) bundle. When the bundle is done using the repository instance,
 the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#destroy-org.apache.sling.jcr.base.AbstractSlingRepository2-"><code>destroy(AbstractSlingRepository2)</code></a> method is called to clean
 up.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The OSGi <code>ServiceRegistration</code> object representing the
         registered service.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-java.lang.String-boolean-"><code>start(BundleContext, String, boolean)</code></a>, 
<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationInterfaces--"><code>getServiceRegistrationInterfaces()</code></a>, 
<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#getServiceRegistrationProperties--"><code>getServiceRegistrationProperties()</code></a>, 
<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-"><code>create(Bundle)</code></a>, 
<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#destroy-org.apache.sling.jcr.base.AbstractSlingRepository2-"><code>destroy(AbstractSlingRepository2)</code></a></dd>
</dl>
</li>
</ul>
<a name="getServiceRegistrationProperties--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceRegistrationProperties</h4>
<pre>protected abstract&nbsp;java.util.Dictionary&lt;java.lang.String,java.lang.Object&gt;&nbsp;getServiceRegistrationProperties()</pre>
<div class="block">Return the service registration properties to be used to register the
 repository service in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The service registration properties to be used to register the
         repository service in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
</dl>
</li>
</ul>
<a name="getServiceRegistrationInterfaces--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceRegistrationInterfaces</h4>
<pre>protected&nbsp;java.lang.String[]&nbsp;getServiceRegistrationInterfaces()</pre>
<div class="block">Returns the service types to be used to register the repository service
 in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a>. All interfaces returned must be accessible
 to the class loader of the class of this instance.
 <p>
 This method may be overwritten to return additional types but the types
 returned from this base implementation, <code>SlingRepository</code> and
 <code>Repository</code>, must always be included.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The service types to be used to register the repository service
         in <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
</dl>
</li>
</ul>
<a name="create-org.osgi.framework.Bundle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>protected abstract&nbsp;<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a>&nbsp;create(org.osgi.framework.Bundle&nbsp;usingBundle)</pre>
<div class="block">Creates an instance of the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
 implementation for use by the given <code>usingBundle</code>.
 <p>
 This method is called when the repository service is requested from
 within the using bundle for the first time.
 <p>
 This method is expected to return a new instance on every call.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>usingBundle</code> - The bundle providing from which the repository is
            requested.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> implementation instance to
         be used by the <code>usingBundle</code>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
</dl>
</li>
</ul>
<a name="destroy-org.apache.sling.jcr.base.AbstractSlingRepository2-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>protected abstract&nbsp;void&nbsp;destroy(<a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepository2</a>&nbsp;repositoryServiceInstance)</pre>
<div class="block">Cleans up the given <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a> instance previously
 created by the <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#create-org.osgi.framework.Bundle-"><code>create(Bundle)</code></a> method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repositoryServiceInstance</code> - The <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><code>AbstractSlingRepository2</code></a>
            istance to cleanup.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#registerService--"><code>registerService()</code></a></dd>
</dl>
</li>
</ul>
<a name="getRepository--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRepository</h4>
<pre>protected final&nbsp;javax.jcr.Repository&nbsp;getRepository()</pre>
<div class="block">Returns the repository underlying this instance or <code>null</code> if
 no repository is currently being available.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The repository</dd>
</dl>
</li>
</ul>
<a name="unregisterService-org.osgi.framework.ServiceRegistration-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unregisterService</h4>
<pre>protected final&nbsp;void&nbsp;unregisterService(org.osgi.framework.ServiceRegistration&nbsp;serviceRegistration)</pre>
<div class="block">Unregisters the service represented by the
 <code>serviceRegistration</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>serviceRegistration</code> - The service to unregister</dd>
</dl>
</li>
</ul>
<a name="disposeRepository-javax.jcr.Repository-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disposeRepository</h4>
<pre>protected abstract&nbsp;void&nbsp;disposeRepository(javax.jcr.Repository&nbsp;repository)</pre>
<div class="block">Disposes off the given <code>repository</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>repository</code> - The repository to be disposed off which is the same as
            the one returned from <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#acquireRepository--"><code>acquireRepository()</code></a>.</dd>
</dl>
</li>
</ul>
<a name="stoppingOnError-java.lang.String-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stoppingOnError</h4>
<pre>protected&nbsp;void&nbsp;stoppingOnError(java.lang.String&nbsp;message,
                               java.lang.Throwable&nbsp;t)</pre>
<div class="block">Called when the repository service cannot be initialized or registered
 because an exception occurred.
 <p>
 This default implementation logs the exception as an error.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - failure details.</dd>
<dd><code>t</code> - the exception.</dd>
</dl>
</li>
</ul>
<a name="start-org.osgi.framework.BundleContext-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>@Deprecated
protected final&nbsp;boolean&nbsp;start(org.osgi.framework.BundleContext&nbsp;bundleContext,
                                          java.lang.String&nbsp;defaultWorkspace,
                                          boolean&nbsp;disableLoginAdministrative)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">use <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#start-org.osgi.framework.BundleContext-org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config-"><code>start(BundleContext, AbstractSlingRepositoryManager.Config)</code></a> instead.</span></div>
<div class="block">This method was deprecated with the introduction of asynchronous repository registration. With
 asynchronous registration a boolean return value can no longer be guaranteed, as registration
 may happen after the method returns.
 <p>
 Instead a <code>ServiceListener</code> for <a href="../../../../../org/apache/sling/jcr/api/SlingRepository.html" title="interface in org.apache.sling.jcr.api"><code>SlingRepository</code></a> may be
 registered to get informed about its successful registration.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bundleContext</code> - The <code>BundleContext</code> to register the repository
            service (and optionally more services required to operate the
            repository)</dd>
<dd><code>defaultWorkspace</code> - The name of the default workspace to use to
            login. This may be <code>null</code> to have the actual repository
            instance define its own default</dd>
<dd><code>disableLoginAdministrative</code> - Whether to disable the
            <code>SlingRepository.loginAdministrative</code> method or not.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the repository has been started and the service
         is registered; <code>false</code> if the service has not been registered,
         which may indicate that startup was unsuccessful OR that it is happening
         asynchronously. A more reliable way to determin availability of the
         <a href="../../../../../org/apache/sling/jcr/api/SlingRepository.html" title="interface in org.apache.sling.jcr.api"><code>SlingRepository</code></a> as a service is using a
         <code>ServiceListener</code>.</dd>
</dl>
</li>
</ul>
<a name="start-org.osgi.framework.BundleContext-org.apache.sling.jcr.base.AbstractSlingRepositoryManager.Config-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>protected final&nbsp;void&nbsp;start(org.osgi.framework.BundleContext&nbsp;bundleContext,
                           <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base">AbstractSlingRepositoryManager.Config</a>&nbsp;config)</pre>
<div class="block">This method actually starts the backing repository instannce and
 registeres the repository service.
 <p>
 Multiple subsequent calls to this method without calling <a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html#stop--"><code>stop()</code></a>
 first have no effect.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bundleContext</code> - The <code>BundleContext</code> to register the repository
            service (and optionally more services required to operate the
            repository)</dd>
<dd><code>config</code> - The configuration to apply to this instance.</dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stop</h4>
<pre>protected final&nbsp;void&nbsp;stop()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractSlingRepositoryManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepository2.html" title="class in org.apache.sling.jcr.base"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/sling/jcr/base/AbstractSlingRepositoryManager.Config.html" title="class in org.apache.sling.jcr.base"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sling/jcr/base/AbstractSlingRepositoryManager.html" target="_top">Frames</a></li>
<li><a href="AbstractSlingRepositoryManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2022 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
