<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: XSLT Processing Pipeline</title>
        <link rel="icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <script src='https://www.apachecon.com/event-images/snippet.js'></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
	<!-- Matomo Web Analytics -->
	<script>
	var _paq = window._paq = window._paq || [];
	/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	/* We explicitly disable cookie tracking to avoid privacy issues */
	_paq.push(['disableCookies']); 
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	  var u="https://matomo.privacy.apache.org/";
	  _paq.push(['setTrackerUrl', u+'matomo.php']);
	  _paq.push(['setSiteId', '6']);
	  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<!-- End Matomo Code -->
	<link href='/pagefind/pagefind-ui.css' rel='stylesheet'><script src='/pagefind/pagefind-ui.js' type='text/javascript'></script>
	<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#searchbox" });
    });
	</script>
	
    </head>    <body>
        <div class="section">
            <div class="level is-marginless">
<div class="logo">
                    <a href="https://sling.apache.org">
                        <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                    </a>
                </div><div class="header">
                    <a href="https://www.apache.org">
                        <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                    </a>
                </div>                
            </div><section class="searchbox level is-marginless">
                <div id="searchbox"></div>
            </section><div class="columns is-gapless">
                <div class="column is-narrow sidemenu">
<div class="container">
                        <nav class="menu">
                            <ul class="menu-list box is-shadowless is-marginless">
                                <li>
                                    <p class="menu-label">
                                        <strong>Documentation</strong>
                                    </p><ul>
                                        <li><a href="/documentation.html">Overview</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>API Docs</strong>
                                    </p><ul>
                                        <li><a href="/apidocs/sling13/index.html">Sling 13</a></li><li><a href="/apidocs/sling12/index.html">Sling 12</a></li><li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Support</strong>
                                    </p><ul>
                                        <li><a href="https://s.apache.org/sling.wiki">Wiki</a></li><li><a href="https://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Sitemap</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Project Info</strong>
                                    </p><ul>
                                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="https://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Source</strong>
                                    </p><ul>
                                        <li><a href="/repolist.html">Repositories</a></li><li><a href="https://gitbox.apache.org/repos/asf#sling">Git at Apache</a></li>
                                    </ul>
                                </li><li>
                                    <p class="menu-label">
                                        <strong>Apache Software<br>Foundation</strong>
                                    </p><ul>
                                        <li><a href="https://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="https://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li>
                                    </ul>
                                </li><li>
                                    <a class="acevent" data-format="square" data-event="random"></a>
                                </li><li>
                                    <a href="https://apache.org/foundation/contributing.html" class="column">
                                        <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>                    
                </div><div class="column main">
                    <div class="box is-shadowless is-marginless">
                        <div class="level">
                            <div class="pagenav">
<div class="breadcrumb">
                                    <ul>
                                        <li>
                                            <a href="/">
                                                Home
                                            </a>
                                        </li><li>
                                            <a href="/old-stuff.html">
                                                Old Stuff
                                            </a>
                                        </li><li>
                                            <a href="/old-stuff/scriptengineintegration.html">
                                                Integrating Scripting Languages
                                            </a>
                                        </li>
                                    </ul>
                                </div>                                
                            </div><div class="tags">
                                <span class="tag">
                                    <a href="/tags/xslt.html">
                                        xslt
                                    </a>
                                </span><span class="tag">
                                    <a href="/tags/postprocessing.html">
                                        postprocessing
                                    </a>
                                </span>
                            </div>
                        </div><h1 class="title">
                            XSLT Processing Pipeline
                        </h1><nav class="menu">
                            <ul class="menu-list box is-shadowless is-paddingless">
                                <li id="generatedToC">
                                    <p class="menu-label">
                                        <strong>Table of Contents</strong>
                                    </p>
                                </li>
                            </ul>
                        </nav><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=title],h2,h3','ulClass':'menu-list'}); } );</script><div class="content is-marginless">
<div class="row" data-pagefind-body="true"><div><section><p>In the <em>Apache Sling Scripting W3C XML Processing Support</em> bundle, Juanjo Vàzquez has implemented XSLT processing support for Sling as another new scripting engine, based on the <a href="http://cocoon.apache.org/3.0/">Cocoon 3 pipeline engine</a>.</p>
<h2><a href="#intro" id="intro">Intro</a></h2>
<p>An XML pipeline specifies a sequence of operations to be performed on zero or more XML documents. There are a number of advantages to using pipelines above all in terms of separation of concerns. On the other hand, we talk about XSLT processing if the operations in a pipeline are performed executing or applying XSLT stylesheets.</p>
<p>XSLT processing support is implemented in Sling as an scripting engine bundle named <em>Apache Sling Scripting W3C XML Processing Support</em>. This bundle is based on the <a href="http://cocoon.apache.org/3.0/">Cocoon 3 pipeline engine</a> and uses the <a href="http://www.w3.org/TR/xproc/">W3C XProc language</a> in order to specify pipelines to be processed.</p>
<p>For the time being, XProc is partially implemented and it is not clear that Sling must support all W3C recomendation yet. This could depend of concrete user requirements or use cases.</p>
<p>The source code is found in the <a href="http://svn.apache.org/repos/asf/incubator/sling/trunk/contrib/scripting/xproc">contrib/scripting/xproc</a> module.</p>
<h2><a href="#how-to-install" id="how-to-install">How to Install</a></h2>
<p>Install the <code>org.apache.sling.scripting.xproc</code> bundle in order to work with XProc.</p>
<p>To deploy the bundle go to the bundles page of Apache Felix Web Console (http://localhost:8080/system/console/bundles), select the bundle file to upload, check the Start check box and click Install or Update button.</p>
<p>In order to check whether XProc scripting engine has been installed, go to the Script Engines page of the Apache Felix Web Console and see the entry for XProc there:</p>
<pre><code>Apache Sling Scripting W3C XML Processing Support, 2.0.0-incubator-SNAPSHOT
  	Language 	XMLProc, 1.0
  	Extensions 	xpl
  	MIME Types 	application/xml
  	Names 	XProc, xml processing, xml pipeline processor 
</code></pre>
<h2><a href="#how-it-works" id="how-it-works">How it works</a></h2>
<p>As explained above, the bundle is able to perform a sequence of XSLT transforms on an XML document just as is expressed in a pipeline definition. A pipeline definition is a file with an xpl extension that follows the <a href="http://www.w3.org/TR/xproc/">W3C XProc grammar</a>. Only <code>p:xslt</code> steps are supported at the moment.</p>
<p>For the XML input of pipeline, the processing uses a Cocoon generator named <code>SlingGenerator</code> that tries to resolve the requested resource as (in order of preference):</p>
<ul>
<li>a static XML file</li>
<li>a dynamically generated XML</li>
<li>the underlying node's export document view</li>
</ul>
<h2><a href="#samples" id="samples">Samples</a></h2>
<p>Let's see some samples in order to understand the processing behaviour.</p>
<ol>
<li>
<p>Create some content</p>
<pre><code>#!bash
$ curl -u admin:admin -F sling:resourceType=xproc -F title=&quot;some title&quot; \
-F text=&quot;And some text&quot; http://localhost:8080/foo
</code></pre>
</li>
<li>
<p>Use WebDAV or curl to create a pipeline script at <code>/apps/xproc/xproc.xpl</code> :</p>
<pre><code><!-- TODO syntax marker (#!xml) disabled -->&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;p:pipeline xmlns:p=&quot;http://www.w3.org/ns/xproc&quot;&gt;

  &lt;p:xslt&gt;
    &lt;p:input port=&quot;stylesheet&quot;&gt;
      &lt;p:document href=&quot;/apps/xproc/one.xsl&quot;/&gt;
    &lt;/p:input&gt;
  &lt;/p:xslt&gt;

  &lt;p:xslt&gt;
    &lt;p:input port=&quot;stylesheet&quot;&gt;
      &lt;p:document href=&quot;/apps/xproc/two.xsl&quot;/&gt;
    &lt;/p:input&gt;
  &lt;/p:xslt&gt;

&lt;/p:pipeline&gt;
</code></pre>
</li>
<li>
<p>Store the XSLT transforms in the repository:</p>
<p><strong><code>/apps/xproc/one.xsl</code></strong></p>
<pre><code><!-- TODO syntax marker (#!xml) disabled -->&lt;xsl:stylesheet version=&quot;1.0&quot;
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

    &lt;xsl:template match=&quot;/&quot;&gt;
      &lt;one&gt;
        &lt;xsl:copy-of select=&quot;.&quot;/&gt;
      &lt;/one&gt;
    &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
<p><strong><code>/apps/xproc/two.xsl</code></strong></p>
<pre><code><!-- TODO syntax marker (#!xml) disabled -->&lt;xsl:stylesheet version=&quot;1.0&quot;
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

    &lt;xsl:template match=&quot;/&quot;&gt;
      &lt;two&gt;
        &lt;xsl:copy-of select=&quot;.&quot;/&gt;
      &lt;/two&gt;
    &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
</li>
<li>
<p>Request foo.html to execute the pipeline:</p>
<pre><code>#!bash
$ curl http://admin:admin@localhost:8080/foo.html

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;two&gt;
  &lt;one&gt;
    &lt;foo ...sling:resourceType=&quot;xproc&quot; text=&quot;And some text&quot; title=&quot;some title&quot;/&gt;
  &lt;/one&gt;
&lt;/two&gt;
</code></pre>
<p>In this case, the node's document view has been the pipeline's source.</p>
</li>
<li>
<p>Now, store a static XML in the repository at <code>/foo.xml</code>:</p>
<pre><code><!-- TODO syntax marker (#!xml) disabled -->&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;foo&gt;
	&lt;content&gt;
		foo: static content
	&lt;/content&gt;
&lt;/foo&gt;
</code></pre>
</li>
<li>
<p>Again, request foo.html to execute the pipeline:</p>
<pre><code>#!bash
$ curl http://admin:admin@localhost:8080/foo.html

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;two&gt;
  &lt;one&gt;
    &lt;foo&gt;
    	&lt;content&gt;
    	  foo: static content
    	&lt;/content&gt;
    &lt;/foo&gt;
  &lt;/one&gt;
&lt;/two&gt;
</code></pre>
<p>This time the pipeline's source has been a static XML file.</p>
</li>
<li>
<p>Store a script in the repository at <code>/apps/xproc/xproc.xml.esp</code></p>
<pre><code><!-- TODO syntax marker (#!xml) disabled -->&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;foo&gt;
	&lt;content&gt;
		foo: dynamic content
	&lt;/content&gt;
&lt;/foo&gt;
</code></pre>
</li>
<li>
<p>Delete the previously created static xml file <code>/foo.xml</code>.</p>
</li>
<li>
<p>Request foo.html to execute the pipeline:</p>
<pre><code>#!bash
$ curl http://admin:admin@localhost:8080/foo.html

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;two&gt;
  &lt;one&gt;
    &lt;foo&gt;
    	&lt;content&gt;
    	  foo: dynamic content
    	&lt;/content&gt;
    &lt;/foo&gt;
  &lt;/one&gt;
&lt;/two&gt;
</code></pre>
<p>This time the pipeline's source has been a dinamically generated XML.</p>
</li>
</ol>
<h2><a href="#references" id="references">References</a></h2>
<ul>
<li><a href="http://cocoon.apache.org//3.0/">Cocoon 3 pipeline engine</a></li>
<li><a href="http://www.w3.org/TR/xproc/">W3C XProc language</a></li>
<li><a href="https://issues.apache.org/jira/browse/SLING-893">SLING-893</a></li>
<li><a href="http://markmail.org/thread/33h5nhk5e3mswrue">Mail list discussion</a></li>
</ul>
</section></div></div><div data-pagefind-body="true" data-pagefind-weight="7.0" style="display:none;"> - ( XSLT Processing Pipeline )</div>                            
                        </div>
                    </div>
                </div>
            </div><footer class="footer">
                <div class="content has-text-centered is-small">
<div class="editpagelink">
                        This page can be edited on GitHub at <a href="https://github.com/apache/sling-site/edit/master/src/main/jbake/content/old-stuff/scriptengineintegration/xslt-processing-pipeline.md">
                            content/old-stuff/scriptengineintegration/xslt-processing-pipeline.md
                        </a>
                    </div>                    <div class="revisionInfo">
                        Last modified by <span class="author">Bertrand Delacretaz</span> on <span class="comment">2017-09-29</span>
                    </div><p>
                        Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project
    logo are trademarks of The Apache Software Foundation. All other marks mentioned 
    may be trademarks or registered trademarks of their respective owners.
                    </p><p>
                        Copyright © 2007-2025<a href="https://www.apache.org/">
                            The Apache Software Foundation
                        </a>|<a href="https://privacy.apache.org/policies/privacy-policy-public.html">
                            Privacy Policy
                        </a>
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>