<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_20) on Thu Oct 09 10:19:46 EEST 2014 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AuthUtil (Apache Sling 7 API)</title>
<meta name="date" content="2014-10-09">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AuthUtil (Apache Sling 7 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AuthUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sling/auth/core/AuthenticationSupport.html" title="interface in org.apache.sling.auth.core"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sling/auth/core/AuthUtil.html" target="_top">Frames</a></li>
<li><a href="AuthUtil.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.sling.auth.core</div>
<h2 title="Class AuthUtil" class="title">Class AuthUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.sling.auth.core.AuthUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">AuthUtil</span>
extends <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">The <code>AuthUtil</code> provides utility functions for implementations of
 <a href="../../../../../org/apache/sling/auth/core/spi/AuthenticationHandler.html" title="interface in org.apache.sling.auth.core.spi"><code>AuthenticationHandler</code></a> services and
 users of the Sling authentication infrastructure.
 <p>
 This utility class can neither be extended from nor can it be instantiated.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1 (bundle version 1.0.8)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#checkReferer-javax.servlet.http.HttpServletRequest-java.lang.String-">checkReferer</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
            <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;loginForm)</code>
<div class="block">Check if the request is for this authentication handler.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#getAttributeOrParameter-javax.servlet.http.HttpServletRequest-java.lang.String-java.lang.String-">getAttributeOrParameter</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                       <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                       <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</code>
<div class="block">Returns the value of the named request attribute or parameter as a string
 as follows:
 
 If there is a request attribute of that name, which is a non-empty
 string, it is returned.If there is a non-empty request parameter of
 that name, this parameter is returned.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#getLoginResource-javax.servlet.http.HttpServletRequest-java.lang.String-">getLoginResource</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultLoginResource)</code>
<div class="block">Returns any resource target to redirect to after successful
 authentication.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#isAjaxRequest-javax.servlet.http.HttpServletRequest-">isAjaxRequest</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request)</code>
<div class="block">Returns <code>true</code> if the request is to be considered an AJAX
 request placed using the <code>XMLHttpRequest</code> browser host object.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#isBrowserRequest-javax.servlet.http.HttpServletRequest-">isBrowserRequest</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request)</code>
<div class="block">Returns <code>true</code> if the given request can be assumed to be sent
 by a client browser such as Firefix, Internet Explorer, etc.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#isRedirectValid-javax.servlet.http.HttpServletRequest-java.lang.String-">isRedirectValid</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
               <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;target)</code>
<div class="block">Returns <code>true</code> if the given redirect <code>target</code> is
 valid according to the following list of requirements:
 
 The <code>target</code> is neither <code>null</code> nor an empty
 string
 The <code>target</code> is not an URL which is identified by the
 character sequence <code>://</code> separating the scheme from the host
 The <code>target</code> is normalized such that it contains no
 consecutive slashes and no path segment contains a single or double dot
 The <code>target</code> must be prefixed with the servlet context
 path
 If a <code>ResourceResolver</code> is available as a request
 attribute the <code>target</code> (without the servlet context path
 prefix) must resolve to an existing resource
 If a <code>ResourceResolver</code> is <i>not</i> available as a
 request attribute the <code>target</code> must be an absolute path
 starting with a slash character does not contain any of the characters
 <code>&lt;</code>, <code>&gt;</code>, <code>'</code>, or <code>"</code>
 in plain or URL encoding
 </div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#isValidateRequest-javax.servlet.http.HttpServletRequest-">isValidateRequest</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request)</code>
<div class="block">Returns <code>true</code> if the the client just asks for validation of
 submitted username/password credentials.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#sendInvalid-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">sendInvalid</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
           javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Sends a 403/FORBIDDEN response optionally stating the reason for this
 response code in the <code>#X_REASON</code> header.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#sendRedirect-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-java.util.Map-">sendRedirect</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
            javax.servlet.http.HttpServletResponse&nbsp;response,
            <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;target,
            <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;params)</code>
<div class="block">Redirects to the given target path appending any parameters provided in
 the parameter map.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#sendValid-javax.servlet.http.HttpServletResponse-">sendValid</a></span>(javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Sends a 200/OK response to a credential validation request.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#setLoginResourceAttribute-javax.servlet.http.HttpServletRequest-java.lang.String-">setLoginResourceAttribute</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                         <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</code>
<div class="block">Ensures and returns the <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>Authenticator.LOGIN_RESOURCE</code></a> request
 attribute is set to a non-null, non-empty string.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getAttributeOrParameter-javax.servlet.http.HttpServletRequest-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttributeOrParameter</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getAttributeOrParameter(javax.servlet.http.HttpServletRequest&nbsp;request,
                                             <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                                             <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</pre>
<div class="block">Returns the value of the named request attribute or parameter as a string
 as follows:
 <ol>
 <li>If there is a request attribute of that name, which is a non-empty
 string, it is returned.</li>If there is a non-empty request parameter of
 that name, this parameter is returned.
 <li>Otherwise the <code>defaultValue</code> is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request from which to return the attribute or request
            parameter</dd>
<dd><code>name</code> - The name of the attribute/parameter</dd>
<dd><code>defaultValue</code> - The default value to use if neither a non-empty
            string attribute or a non-empty parameter exists in the
            request.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The attribute, parameter or <code>defaultValue</code> as defined
         above.</dd>
</dl>
</li>
</ul>
<a name="getLoginResource-javax.servlet.http.HttpServletRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoginResource</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getLoginResource(javax.servlet.http.HttpServletRequest&nbsp;request,
                                      <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultLoginResource)</pre>
<div class="block">Returns any resource target to redirect to after successful
 authentication. This method either returns a non-empty string or the
 <code>defaultLoginResource</code> parameter. First the
 <code>resource</code> request attribute is checked. If it is a non-empty
 string, it is returned. Second the <code>resource</code> request
 parameter is checked and returned if it is a non-empty string.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request providing the attribute or parameter</dd>
<dd><code>defaultLoginResource</code> - The default login resource value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The non-empty redirection target or
         <code>defaultLoginResource</code>.</dd>
</dl>
</li>
</ul>
<a name="setLoginResourceAttribute-javax.servlet.http.HttpServletRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLoginResourceAttribute</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;setLoginResourceAttribute(javax.servlet.http.HttpServletRequest&nbsp;request,
                                               <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</pre>
<div class="block">Ensures and returns the <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>Authenticator.LOGIN_RESOURCE</code></a> request
 attribute is set to a non-null, non-empty string. If the attribute is not
 currently set, this method sets it as follows:
 <ol>
 <li>If the <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>Authenticator.LOGIN_RESOURCE</code></a> request parameter is set
 to a non-empty string, that parameter is set</li>
 <li>Otherwise if the <code>defaultValue</code> is a non-empty string the
 default value is used</li>
 <li>Otherwise the attribute is set to "/"</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request to check for the resource attribute</dd>
<dd><code>defaultValue</code> - The default value to use if the attribute is not set
            and the request parameter is not set. This parameter is
            ignored if it is <code>null</code> or an empty string.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>returns the value of resource request attribute</dd>
</dl>
</li>
</ul>
<a name="sendRedirect-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendRedirect</h4>
<pre>public static&nbsp;void&nbsp;sendRedirect(javax.servlet.http.HttpServletRequest&nbsp;request,
                                javax.servlet.http.HttpServletResponse&nbsp;response,
                                <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;target,
                                <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;params)
                         throws <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Redirects to the given target path appending any parameters provided in
 the parameter map.
 <p>
 This method implements the following functionality:
 <ul>
 <li>If the <code>params</code> map does not contain a (non-
 <code>null</code>) value for the <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>resource</code></a> entry, such an entry is generated from the request URI and the
 (optional) query string of the given <code>request</code>.</li>
 <li>The parameters from the <code>params</code> map or at least a single
 <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>resource</code></a> parameter are added to the
 target path for the redirect. Each parameter value is encoded using the
 <code>java.net.URLEncoder</code> with UTF-8 encoding to make it safe for
 requests</li>
 </ul>
 <p>
 After checking the redirect target and creating the target URL from the
 parameter map, the response buffer is reset and the
 <code>HttpServletResponse.sendRedirect</code> is called. Any headers
 already set before calling this method are preserved.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request object used to get the current request URI and
            request query string if the <code>params</code> map does not
            have the <a href="../../../../../org/apache/sling/api/auth/Authenticator.html#LOGIN_RESOURCE"><code>resource</code></a>
            parameter set.</dd>
<dd><code>response</code> - The response used to send the redirect to the client.</dd>
<dd><code>target</code> - The redirect target to validate. This path must be prefixed
            with the request's servlet context path. If this parameter is
            not a valid target request as per the
            <a href="../../../../../org/apache/sling/auth/core/AuthUtil.html#isRedirectValid-javax.servlet.http.HttpServletRequest-java.lang.String-"><code>isRedirectValid(HttpServletRequest, String)</code></a> method
            the target is modified to be the root of the request's
            context.</dd>
<dd><code>params</code> - The map of parameters to be added to the target path. This
            may be <code>null</code>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - If an error occurs sending the redirect request</dd>
<dd><code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If the response was committed or if a
             partial URL is given and cannot be converted into a valid URL</dd>
<dd><code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/InternalError.html?is-external=true" title="class or interface in java.lang">InternalError</a></code> - If the UTF-8 character encoding is not supported by
             the platform. This should not be caught, because it is a real
             problem if the encoding required by the specification is
             missing.</dd>
</dl>
</li>
</ul>
<a name="isValidateRequest-javax.servlet.http.HttpServletRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidateRequest</h4>
<pre>public static&nbsp;boolean&nbsp;isValidateRequest(javax.servlet.http.HttpServletRequest&nbsp;request)</pre>
<div class="block">Returns <code>true</code> if the the client just asks for validation of
 submitted username/password credentials.
 <p>
 This implementation returns <code>true</code> if the request parameter
 <code>#PAR_J_VALIDATE</code> is set to <code>true</code> (case-insensitve). If
 the request parameter is not set or to any value other than
 <code>true</code> this method returns <code>false</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request to provide the parameter to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the <code>#PAR_J_VALIDATE</code> parameter is set
         to <code>true</code>.</dd>
</dl>
</li>
</ul>
<a name="sendValid-javax.servlet.http.HttpServletResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendValid</h4>
<pre>public static&nbsp;void&nbsp;sendValid(javax.servlet.http.HttpServletResponse&nbsp;response)</pre>
<div class="block">Sends a 200/OK response to a credential validation request.
 <p>
 This method just overwrites the response status to 200/OK, sends no
 content (content length header set to zero) and prevents caching on
 clients and proxies. Any other response headers set before calling this
 methods are preserved and sent along with the response.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>response</code> - The response object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the response has already been committed</dd>
</dl>
</li>
</ul>
<a name="sendInvalid-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendInvalid</h4>
<pre>public static&nbsp;void&nbsp;sendInvalid(javax.servlet.http.HttpServletRequest&nbsp;request,
                               javax.servlet.http.HttpServletResponse&nbsp;response)</pre>
<div class="block">Sends a 403/FORBIDDEN response optionally stating the reason for this
 response code in the <code>#X_REASON</code> header. The value for the
 <code>#X_REASON</code> header is taken from
 <a href="../../../../../org/apache/sling/auth/core/spi/AuthenticationHandler.html#FAILURE_REASON"><code>AuthenticationHandler.FAILURE_REASON</code></a> request attribute if set.
 <p>
 This method just overwrites the response status to 403/FORBIDDEN, adds
 the <a href="../../../../../org/apache/sling/auth/core/AuthConstants.html#X_REASON"><code>AuthConstants.X_REASON</code></a> header and sends the reason as result
 back. Any other response headers set before calling this methods are
 preserved and sent along with the response.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request object</dd>
<dd><code>response</code> - The response object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the response has already been committed</dd>
</dl>
</li>
</ul>
<a name="checkReferer-javax.servlet.http.HttpServletRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReferer</h4>
<pre>public static&nbsp;boolean&nbsp;checkReferer(javax.servlet.http.HttpServletRequest&nbsp;request,
                                   <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;loginForm)</pre>
<div class="block">Check if the request is for this authentication handler.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the current request</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the referer matches this handler, or false otherwise</dd>
</dl>
</li>
</ul>
<a name="isRedirectValid-javax.servlet.http.HttpServletRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRedirectValid</h4>
<pre>public static&nbsp;boolean&nbsp;isRedirectValid(javax.servlet.http.HttpServletRequest&nbsp;request,
                                      <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;target)</pre>
<div class="block">Returns <code>true</code> if the given redirect <code>target</code> is
 valid according to the following list of requirements:
 <ul>
 <li>The <code>target</code> is neither <code>null</code> nor an empty
 string</li>
 <li>The <code>target</code> is not an URL which is identified by the
 character sequence <code>://</code> separating the scheme from the host</li>
 <li>The <code>target</code> is normalized such that it contains no
 consecutive slashes and no path segment contains a single or double dot</li>
 <li>The <code>target</code> must be prefixed with the servlet context
 path</li>
 <li>If a <code>ResourceResolver</code> is available as a request
 attribute the <code>target</code> (without the servlet context path
 prefix) must resolve to an existing resource</li>
 <li>If a <code>ResourceResolver</code> is <i>not</i> available as a
 request attribute the <code>target</code> must be an absolute path
 starting with a slash character does not contain any of the characters
 <code>&lt;</code>, <code>&gt;</code>, <code>'</code>, or <code>"</code>
 in plain or URL encoding</li>
 </ul>
 <p>
 If any of the conditions does not hold, the method returns
 <code>false</code> and logs a <i>warning</i> level message with the
 <i>org.apache.sling.auth.core.AuthUtil</i> logger.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - Providing the <code>ResourceResolver</code> attribute and
            the context to resolve the resource from the
            <code>target</code>. This may be <code>null</code> which
            causes the target to not be validated with a
            <code>ResoureResolver</code></dd>
<dd><code>target</code> - The redirect target to validate. This path must be
      prefixed with the request's servlet context path.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the redirect target can be considered valid</dd>
</dl>
</li>
</ul>
<a name="isBrowserRequest-javax.servlet.http.HttpServletRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBrowserRequest</h4>
<pre>public static&nbsp;boolean&nbsp;isBrowserRequest(javax.servlet.http.HttpServletRequest&nbsp;request)</pre>
<div class="block">Returns <code>true</code> if the given request can be assumed to be sent
 by a client browser such as Firefix, Internet Explorer, etc.
 <p>
 This method inspects the <code>User-Agent</code> header and returns
 <code>true</code> if the header contains the string <i>Mozilla</i> (known
 to be contained in Firefox, Internet Explorer, WebKit-based browsers
 User-Agent) or <i>Opera</i> (known to be contained in the Opera
 User-Agent).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The request to inspect</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the request is assumed to be sent by a
         browser.</dd>
</dl>
</li>
</ul>
<a name="isAjaxRequest-javax.servlet.http.HttpServletRequest-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isAjaxRequest</h4>
<pre>public static&nbsp;boolean&nbsp;isAjaxRequest(javax.servlet.http.HttpServletRequest&nbsp;request)</pre>
<div class="block">Returns <code>true</code> if the request is to be considered an AJAX
 request placed using the <code>XMLHttpRequest</code> browser host object.
 Currently a request is considered an AJAX request if the client sends the
 <i>X-Requested-With</i> request header set to <code>XMLHttpRequest</code>
 .</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - The current request</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the request can be considered an AJAX
         request.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AuthUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sling/auth/core/AuthenticationSupport.html" title="interface in org.apache.sling.auth.core"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sling/auth/core/AuthUtil.html" target="_top">Frames</a></li>
<li><a href="AuthUtil.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
